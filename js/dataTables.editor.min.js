/*! DataTables Editor v2.5.0
 *
 * © SpryMedia Ltd, all rights reserved.
 * License: editor.datatables.net/license
 */
!function(i){var n,o;"function"==typeof define&&define.amd?define(["jquery","datatables.net"],function(t){return i(t,window,document)}):"object"==typeof exports?(n=require("jquery"),o=function(t,e){e.fn.dataTable||require("datatables.net")(t,e)},"undefined"==typeof window?module.exports=function(t,e){return t=t||window,e=e||n(t),o(t,e),i(e,t,t.document)}:(o(window,n),module.exports=i(n,window,window.document))):i(jQuery,window,document)}(function(w,c,y){"use strict";var r=w.fn.dataTable,t={buttons:!0,drawType:!1,focus:0,message:!0,nest:!1,onBackground:"blur",onBlur:"close",onComplete:"close",onEsc:"close",onFieldError:"focus",onReturn:"submit",refresh:!1,scope:"row",submit:"all",submitHtml:"▶",submitTrigger:null,title:!0},N={actionName:"action",ajax:null,display:"lightbox",domTable:null,events:{},fields:[],formOptions:{bubble:w.extend({},t,{buttons:"_basic",message:!1,submit:"changed",title:!1}),inline:w.extend({},t,{buttons:!1,submit:"changed"}),main:w.extend({},t)},i18n:{close:"Close",create:{button:"New",submit:"Create",title:"Create new entry"},datetime:{amPm:["am","pm"],hours:"Hour",minutes:"Minute",months:["January","February","March","April","May","June","July","August","September","October","November","December"],next:"Next",previous:"Previous",seconds:"Second",unknown:"-",weekdays:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"]},edit:{button:"Edit",submit:"Update",title:"Edit entry"},error:{system:'A system error has occurred (<a target="_blank" href="//datatables.net/tn/12">More information</a>).'},field:{autocomplete:{noResults:"No results found",placeholder:"Type to search"},tags:{addButton:"+ Add",inputPlaceholder:"",noResults:"No results found",placeholder:"Type to search",removeIcon:"&times;"},upload:{choose:"Choose file...",clear:"",dragDrop:"Drag and drop a file here to upload",noFile:"No file",processing:"Processing",uploading:"Uploading file"},uploadMany:{choose:"Choose file...",dragDrop:"Drag and drop a file here to upload",noFiles:"No files",processing:"Processing",uploading:"Uploading file"}},multi:{info:"The selected items contain different values for this input. To edit and set all items for this input to the same value, click or tap here, otherwise they will retain their individual values.",noMulti:"This input can be edited individually, but not part of a group.",restore:"Undo changes",title:"Multiple values"},remove:{button:"Delete",confirm:{1:"Are you sure you wish to delete 1 row?",_:"Are you sure you wish to delete %d rows?"},submit:"Delete",title:"Delete"}},idSrc:"DT_RowId",table:null,template:null},B={action:null,actionName:"action",ajax:null,bubbleNodes:[],bubbleBottom:!1,bubbleLocation:"auto",closeCb:null,closeIcb:null,dataSource:null,displayController:null,displayed:!1,editCount:0,editData:{},editFields:{},editOpts:{},fields:{},formOptions:{bubble:w.extend({},t),inline:w.extend({},t),main:w.extend({},t)},globalError:"",i18n:{},id:-1,idSrc:null,includeFields:[],mode:null,modifier:null,opts:null,order:[],processing:!1,setFocus:null,table:null,template:null,title:null,unique:0},L=w.fn.dataTable;function l(t,e){return w('*[data-dte-e="'+t+'"]',e=void 0===e?y:e)}function p(t,e){return void 0===e&&(e="#"),"string"==typeof t?e+t.replace(/(:|\.|\[|\]|,)/g,"\\$1"):e+t}function u(t){return L.util.get(t)}function _(t){return L.util.set(t)}function h(t,i){var n=[];return w.each(t,function(t,e){n.push(e[i])}),n}function H(t,e){if("object"!=typeof t||"object"!=typeof e||null===t||null===e)return t==e;var i=Object.keys(t),n=Object.keys(e);if(i.length!==n.length)return!1;for(var o=0,s=i.length;o<s;o++){var r=i[o];if("object"==typeof t[r]){if(!H(t[r],e[r]))return!1}else if(t[r]!=e[r])return!1}return!0}function d(t,e){var i,n;for(n in e)Object.prototype.hasOwnProperty.call(e,n)&&(i=e[n],w.isPlainObject(i)?(w.isPlainObject(t[n])||(t[n]={}),d(t[n],i)):Array.isArray(i)?t[n]=i.slice():t[n]=i);return t}function M(t,e){return t.settings()[0].oFeatures.bServerSide&&"none"!==e.s.editOpts.drawType}function f(t){return t instanceof w.fn.dataTable.Api?t:w(t).DataTable()}function V(t){t&&(t=w(t),setTimeout(function(){t.addClass("dte-highlight"),setTimeout(function(){t.removeClass("dte-highlight")},1e3)},20))}function U(l,d,u,c,p,h){void 0===h&&(h=null);var f=d.cells(u);f.indexes().each(function(t){var e,i,n,o=d.cell(t),s=d.row(t.row).data(),s=p(s),r=h||W(d,c,t.column,1<f.count()),a="object"==typeof u&&u.nodeName||u instanceof w;Object.keys(r).length&&(l[s]&&(i=l[s].attach,n=l[s].attachFields,e=l[s].displayFields),q(l,d,t.row,c,p),l[s].attachFields=n||[],l[s].attachFields.push(Object.keys(r)),l[s].attach=i||[],l[s].attach.push(a?w(u).get(0):o.fixedNode?o.fixedNode():o.node()),l[s].displayFields=e||{},w.extend(l[s].displayFields,r))})}var q=function(n,o,t,s,r){o.rows(t).indexes().each(function(t){var t=o.row(t),e=t.data(),i=r(e);void 0===i&&P.error("Unable to find row identifier",14),n[i]={data:e,fields:s,idSrc:i,node:t.node(),type:"row"}})},W=function(t,e,i,n){function s(t,e){t.name()===e&&(o[t.name()]=t)}var t=t.settings()[0].aoColumns[i],r=void 0!==t.editField?t.editField:t.mData,o={};return w.each(e,function(t,e){if(Array.isArray(r))for(var i=0,n=r;i<n.length;i++){var o=n[i];s(e,o)}else s(e,r)}),w.isEmptyObject(o)&&!n&&P.error("Unable to automatically determine field from source. Please specify the field name.",11),o},m={commit:function(t,e,i,n){var o=this,s=f(this.s.table),r=s.settings()[0].oFeatures.bServerSide,a=n.rowIds;if(!M(s,this)&&"edit"===t&&n.rowIds.length)for(var l=void 0,d=0,u=a.length;d<u;d++){try{l=s.row(p(a[d]))}catch(t){l=s}(l=l.any()?l:s.row(function(n){return function(t,e,i){return n==m.id.call(o,e)}}(a[d]))).any()&&!r&&l.remove()}var c,t=this.s.editOpts.drawType;"none"!==t&&(c=s).one("draw",function(){if(r&&a&&a.length)for(var t=0,e=a.length;t<e;t++){var i=s.row(p(a[t]));i.any()&&V(i.node())}c.responsive&&c.responsive.recalc(),"function"!=typeof c.searchPanes||r||c.searchPanes.rebuildPane(void 0,!0),void 0===c.searchBuilder||"function"!=typeof c.searchBuilder.rebuild||r||c.searchBuilder.rebuild(c.searchBuilder.getDetails())}).draw(t)},create:function(t,e){var i,n=f(this.s.table);M(n,this)||(i=n.row.add(e),n.one("draw",function(){V(i.node())}))},edit:function(t,e,i,n){var o=this,s=f(this.s.table);if(!M(s,this)||"none"===this.s.editOpts.drawType){var r,a=m.id.call(this,i),l=void 0;try{l=s.row(p(a))}catch(t){l=s}(l=l.any()?l:s.row(function(t,e,i){return a==m.id.call(o,e)})).any()?(r={},r=d(r=Array.isArray(l.data())?[]:r,l.data()),r=d(r,i),l.data(r),r=w.inArray(a,n.rowIds),n.rowIds.splice(r,1)):l=s.row.add(i),V(l.node())}},fakeRow:function(t){for(var e=f(this.s.table),i=w('<tr class="dte-inlineAdd">'),n=[],o=[],s={},r=e.table(void 0).body(),a=0,l=e.columns(":visible").count();a<l;a++){var d=e.column(a+":visible").index(),u=w("<td>").appendTo(i),c=W(e,this.s.fields,d,!0),d=e.settings()[0].aoColumns[d].sClass;d&&u.addClass(d),Object.keys(c).length&&(n.push(Object.keys(c)),o.push(u[0]),w.extend(s,c))}function p(){0===e.page.info().recordsDisplay&&w(r).empty(),"start"===t||null==t?i.prependTo(r):"end"===t?i.appendTo(r):i.insertAfter(e.row(t).node())}return this.__dtFakeRow=i,p(),e.on("draw.dte-createInline",function(){p()}),{0:{attach:o,attachFields:n,displayFields:s,fields:this.s.fields,type:"row"}}},fakeRowEnd:function(){var t=f(this.s.table);t.off("draw.dte-createInline"),this.__dtFakeRow.remove(),this.__dtFakeRow=null,0===t.page.info().recordsDisplay&&t.draw(!1)},fields:function(t){var e,i,n,o,s,r=u(this.s.idSrc),a=f(this.s.table),l=this.s.fields,d={};return!w.isPlainObject(t)||void 0===t.rows&&void 0===t.columns&&void 0===t.cells?q(d,a,t,l,r):(void 0!==t.rows&&q(d,a,t.rows,l,r),void 0!==t.columns&&(e=d,i=a,n=t.columns,o=l,s=r,i.cells(null,n).indexes().each(function(t){U(e,i,t,o,s)})),void 0!==t.cells&&U(d,a,t.cells,l,r)),d},id:function(t){return u(this.s.idSrc)(t)},individual:function(t,e){var i,n=u(this.s.idSrc),o=f(this.s.table),s=this.s.fields,r={};return e&&(Array.isArray(e)||(e=[e]),i={},w.each(e,function(t,e){i[e]=s[e]})),U(r,o,t,s,n,i),r},prep:function(t,e,i,n,o){var s,r=this;"create"===t&&(o.rowIds=w.map(n.data,function(t){return m.id.call(r,t)})),"edit"===t?(s=n.cancelled||[],o.rowIds=w.map(i.data,function(t,e){return w.isEmptyObject(i.data[e])||-1!==w.inArray(e,s)?void 0:e})):"remove"===t&&(o.cancelled=n.cancelled||[])},refresh:function(){var t=f(this.s.table);t.ajax.url()?t.ajax.reload(null,!1):t.rows().invalidate()},reload:function(t,e){for(var i=f(this.s.table),n=0;n<e.length;n++){var o=m.id.call(this,e[n]),o=(i.row("#"+o).data(e[n]),t.indexOf(o));-1!==o&&t.splice(o,1)}t.length&&i.rows(t.map(function(t){return"#"+t})).remove()},remove:function(t,e,i){var n,o=this,s=f(this.s.table),r=i.cancelled;(0===r.length?s.rows(t):(n=[],s.rows(t).every(function(){var t=m.id.call(o,this.data());-1===w.inArray(t,r)&&n.push(this.index())}),s.rows(n))).remove()}};function z(t){if("keyless"===t)return w(y);var e=w('[data-editor-id="'+t+'"]');if(0===(e=0===e.length?w("string"==typeof t?p(t):t):e).length)throw new Error("Could not find an element with `data-editor-id` or `id` of: "+t);return e}function J(t,e){t=z(t);return w('[data-editor-field="'+e+'"]',t)}function G(n,t,o){w.each(t,function(t,e){var i=e.valFromData(o);void 0!==i&&((e=J(n,e.dataSrc())).filter("[data-editor-value]").length?e.attr("data-editor-value",i):e.each(function(){for(;this.childNodes.length;)this.removeChild(this.firstChild)}).html(i))})}var a={create:function(t,e){if(e){var i=a.id.call(this,e);try{z(i).length&&G(i,t,e)}catch(t){}}},edit:function(t,e,i){G(a.id.call(this,i)||"keyless",e,i)},fields:function(o){var t={};if(Array.isArray(o))for(var e=0,i=o.length;e<i;e++){var n=a.fields.call(this,o[e]);t[o[e]]=n[o[e]]}else{var s={},r=this.s.fields;o=o||"keyless",w.each(r,function(t,e){i=o,n=e.dataSrc();var i,n=(i=J(i,n)).filter("[data-editor-value]").length?i.attr("data-editor-value"):i.html();e.valToData(s,null===n?void 0:n)}),t[o]={data:s,fields:r,idSrc:o,node:y,type:"row"}}return t},id:function(t){return u(this.s.idSrc)(t)},individual:function(i,n){var o,t,s,r;if((i instanceof w||i.nodeName)&&(o=i,n=n||[w(i).attr("data-editor-field")],t=w.fn.addBack?"addBack":"andSelf",i=w(i).parents("[data-editor-id]")[t]().data("editor-id")),i=i||"keyless",(n=n&&!Array.isArray(n)?[n]:n)&&0!==n.length)return t=a.fields.call(this,i),s=this.s.fields,r={},w.each(n,function(t,e){r[e]=s[e]}),w.each(t,function(t,e){e.type="cell",e.attachFields=[n],e.attach=o?w(o):function(t,e){for(var i=w(),n=0,o=e.length;n<o;n++)i=i.add(J(t,e[n]));return i}(i,n).toArray(),e.fields=s,e.displayFields=r}),t;throw new Error("Cannot automatically determine field name from data source")},initField:function(t){var e=w('[data-editor-label="'+(t.data||t.name)+'"]');!t.label&&e.length&&(t.label=e.html())},remove:function(t,e){"keyless"!==t&&z(t).remove()}},X={actions:{create:"DTE_Action_Create",edit:"DTE_Action_Edit",remove:"DTE_Action_Remove"},body:{content:"DTE_Body_Content",wrapper:"DTE_Body"},bubble:{bg:"DTE_Bubble_Background",close:"DTE_Bubble_Close",liner:"DTE_Bubble_Liner",pointer:"DTE_Bubble_Triangle",table:"DTE_Bubble_Table",wrapper:"DTE DTE_Bubble"},field:{disabled:"disabled",error:"DTE_Field_StateError",input:"DTE_Field_Input",inputControl:"DTE_Field_InputControl",inputError:"",label:"DTE_Label","msg-error":"DTE_Field_Error","msg-info":"DTE_Field_Info","msg-label":"DTE_Label_Info","msg-message":"DTE_Field_Message",multiInfo:"multi-info",multiNoEdit:"multi-noEdit",multiRestore:"multi-restore",multiValue:"multi-value",namePrefix:"DTE_Field_Name_",processing:"DTE_Processing_Indicator",typePrefix:"DTE_Field_Type_",wrapper:"DTE_Field"},footer:{content:"DTE_Footer_Content",wrapper:"DTE_Footer"},form:{button:"btn",buttonSubmit:"btn",buttonInternal:"btn",buttons:"DTE_Form_Buttons",content:"DTE_Form_Content",error:"DTE_Form_Error",info:"DTE_Form_Info",tag:"",wrapper:"DTE_Form"},header:{content:"DTE_Header_Content",title:{tag:null,class:""},wrapper:"DTE_Header"},inline:{buttons:"DTE_Inline_Buttons",liner:"DTE_Inline_Field",wrapper:"DTE DTE_Inline"},processing:{active:"processing",indicator:"DTE_Processing_Indicator"},wrapper:"DTE"},v=!1,$=1,b={background:w('<div class="DTED_Envelope_Background"><div></div></div>')[0],close:w('<div class="DTED_Envelope_Close"></div>')[0],content:null,wrapper:w('<div class="DTED DTED_Envelope_Wrapper"><div class="DTED_Envelope_Shadow"></div><div class="DTED_Envelope_Container"></div></div>')[0]};function Q(t){var e=w("div.DTE_Header",b.wrapper).outerHeight(),i=w("div.DTE_Footer",b.wrapper).outerHeight(),e=w(c).height()-2*g.conf.windowPadding-e-i;return w("div.DTE_Body_Content",b.wrapper).css("maxHeight",e),w(t.dom.wrapper).outerHeight()}function Z(t,e){e=e||function(){},v&&(w(b.content).animate({top:-(b.content.offsetHeight+50)},600,function(){w([b.wrapper,b.background]).fadeOut("normal",function(){w(this).detach(),e()})}),v=!1)}function K(e,t){var i,n,o,s,r;t=t||function(){},w("body").append(b.background).append(b.wrapper),b.content.style.height="auto",v||((i=b.wrapper.style).opacity="0",i.display="block",n=Q(e),o=e,s=g.conf.attach,r=new w.fn.dataTable.Api(o.s.table),r=(s="head"===s||"create"===o.s.action?r.table(void 0).header():r.row(o.s.modifier).node()).offsetWidth,i.display="none",i.opacity="1",b.wrapper.style.width=r+"px",b.wrapper.style.marginLeft=-r/2+"px",b.wrapper.style.top=w(s).offset().top+s.offsetHeight+"px",b.content.style.top=-1*n-20+"px",b.background.style.opacity="0",b.background.style.display="block",w(b.background).animate({opacity:$},"normal"),w(b.wrapper).fadeIn(),w(b.content).animate({top:0},600,t)),w(b.close).attr("title",e.i18n.close).off("click.DTED_Envelope").on("click.DTED_Envelope",function(t){e.close()}),w(b.background).off("click.DTED_Envelope").on("click.DTED_Envelope",function(t){e.background()}),w("div.DTED_Lightbox_Content_Wrapper",b.wrapper).off("click.DTED_Envelope").on("click.DTED_Envelope",function(t){w(t.target).hasClass("DTED_Envelope_Content_Wrapper")&&e.background()}),w(c).off("resize.DTED_Envelope").on("resize.DTED_Envelope",function(){Q(e)}),v=!0}var g={close:function(t,e){Z(0,e)},conf:{attach:"row",windowPadding:50},destroy:function(t){Z()},init:function(t){return b.content=w("div.DTED_Envelope_Container",b.wrapper)[0],$=w(b.background).css("opacity"),g},node:function(t){return b.wrapper[0]},open:function(t,e,i){w(b.content).children().detach(),b.content.appendChild(e),b.content.appendChild(b.close),K(t,i)}};function Y(){return void 0!==c.orientation&&c.outerWidth<=576}var s=!1,tt=!1,et=0,T={background:w('<div class="DTED_Lightbox_Background"><div></div></div>'),close:w('<div class="DTED_Lightbox_Close"></div>'),content:null,wrapper:w('<div class="DTED DTED_Lightbox_Wrapper"><div class="DTED_Lightbox_Container"><div class="DTED_Lightbox_Content_Wrapper"><div class="DTED_Lightbox_Content"></div></div></div></div>')};function it(){var t=w("div.DTE_Header",T.wrapper).outerHeight()+w("div.DTE_Footer",T.wrapper).outerHeight();Y()?w("div.DTE_Body_Content",T.wrapper).css("maxHeight","calc(100vh - "+t+"px)"):(t=w(c).height()-2*x.conf.windowPadding-t,w("div.DTE_Body_Content",T.wrapper).css("maxHeight",t))}function nt(t,e){e=e||function(){},w("body").scrollTop(et),t._animate(T.wrapper,{opacity:0,top:x.conf.offsetAni},function(){w(this).detach(),e()}),t._animate(T.background,{opacity:0},function(){w(this).detach()}),s=!1,w(c).off("resize.DTED_Lightbox")}var x={close:function(t,e){nt(t,e)},conf:{offsetAni:25,windowPadding:25},destroy:function(t){s&&nt(t)},init:function(t){return tt||(T.content=w("div.DTED_Lightbox_Content",T.wrapper),T.wrapper.css("opacity",0),T.background.css("opacity",0),tt=!0),x},node:function(t){return T.wrapper[0]},open:function(t,e,i){var n,o=T.content;o.children().detach(),o.append(e).append(T.close),n=t,o=i,Y()&&w("body").addClass("DTED_Lightbox_Mobile"),w("body").append(T.background).append(T.wrapper),it(),s||(s=!0,T.content.css("height","auto"),T.wrapper.css({top:-x.conf.offsetAni}),n._animate(T.wrapper,{opacity:1,top:0},o),n._animate(T.background,{opacity:1}),w(c).on("resize.DTED_Lightbox",function(){it()}),et=w("body").scrollTop()),T.close.attr("title",n.i18n.close).off("click.DTED_Lightbox").on("click.DTED_Lightbox",function(t){n.close()}),T.background.off("click.DTED_Lightbox").on("click.DTED_Lightbox",function(t){t.stopImmediatePropagation(),n.background()}),w("div.DTED_Lightbox_Content_Wrapper",T.wrapper).off("click.DTED_Lightbox").on("click.DTED_Lightbox",function(t){w(t.target).hasClass("DTED_Lightbox_Content_Wrapper")&&(t.stopImmediatePropagation(),n.background())})}},ot=w.fn.dataTable;function st(t,e,i){if(void 0===i&&(i=!0),Array.isArray(t)){void 0!==e&&t.reverse();for(var n=0,o=t;n<o.length;n++){var s=o[n];this.add(s,e,!1)}this._displayReorder(this.order())}else{var r=t.name;if(void 0===r)throw new Error("Error adding field. The field requires a `name` option");if(this.s.fields[r])throw new Error("Error adding field '"+r+"'. A field already exists with this name");this._dataSource("initField",t);var a=new P.Field(t,this.classes.field,this);this.s.fields[r]=a,void 0===e?this.s.order.push(r):null===e?this.s.order.unshift(r):(t=w.inArray(e,this.s.order),this.s.order.splice(t+1,0,r)),this.s.mode&&(t=this.s.editFields,a.multiReset(),w.each(t,function(t,e){var i;e.data&&(i=a.valFromData(e.data)),a.multiSet(t,void 0!==i?i:a.def())})),!1!==i&&this._displayReorder(this.order())}return this}function rt(t){return t?(this.s.ajax=t,this):this.s.ajax}function at(){var t=this.s.editOpts.onBackground;return"function"==typeof t?t(this):"blur"===t?this.blur():"close"===t?this.close():"submit"===t&&this.submit(),this}function lt(){return this._blur(),this}function dt(t,e,a,l){var d,u=this,i=(void 0===a&&(a=!0),this);return this._tidy(function(){i.bubble(t,e,l)})||(w.isPlainObject(e)?(l=e,a=!(e=void 0)):"boolean"==typeof e&&(a=e,l=e=void 0),w.isPlainObject(a)&&(l=a,a=!0),void 0===a&&(a=!0),l=w.extend({},this.s.formOptions.bubble,l),this._editRefresh(t,d=function(){return u._dataSource("individual",t,e)},"bubble",l,function(){var e=".dte"+u.s.unique+u._formOptions(l);if(!u._preopen("bubble"))return u;w(c).on("resize."+e+" scroll."+e,function(){u.bubblePosition()});var t=[],t=(u.s.bubbleNodes=t.concat.apply(t,h(d(),"attach")),u.classes.bubble),i=w('<div class="'+t.bg+'"><div></div></div>'),n=w('<div class="'+t.wrapper+'"><div class="'+t.liner+'"><div class="'+t.table+'"><div class="'+t.close+'" title="'+u.i18n(null,"close")+'"></div><div class="DTE_Processing_Indicator"><span></div></div></div><div class="'+t.pointer+'"></div></div>');if(a){if(l.insertPoint&&1<w(l.insertPoint).length)throw new Error("Bubble insert selector ambagious - would match multiple elements");n.appendTo(l.insertPoint||"body"),i.appendTo("body")}var t=n.children().eq(0),o=t.children(),s=o.children(),r=(t.append(u.dom.formError),o.prepend(u.dom.form),l.message&&t.prepend(u.dom.formInfo),l.title&&t.prepend(u.dom.header),l.buttons&&o.append(u.dom.buttons),w().add(n).add(i));u._closeReg(function(t){u._animate(r,{opacity:0},function(){this===n[0]&&(r.detach(),w(c).off("resize."+e+" scroll."+e),u._clearDynamicInfo(),u._event("closed",["bubble"]))})}),i.on("click",function(){u.blur()}),s.on("click",function(){u._close()}),u.bubblePosition(),u._postopen("bubble",!1);u._animate(r,{opacity:1},function(){this===n[0]&&(u._focus(u.s.includeFields,l.focus),u._event("opened",["bubble",u.s.action]))}),setTimeout(function(){u.s&&u.bubblePosition()},10)})),this}function ut(t){return t?(this.s.bubbleLocation=t,this.bubblePosition(),this):this.s.bubbleLocation}function ct(){var t=w("div.DTE_Bubble"),e=w("div.DTE_Bubble_Liner"),i=this.s.bubbleNodes,n=t.offsetParent().offset(),o={bottom:0,left:0,right:0,top:0},i=(w.each(i,function(t,e){var i=w(e).offset();e=w(e).get(0),o.top+=i.top,o.left+=i.left,o.right+=i.left+e.offsetWidth,o.bottom+=i.top+e.offsetHeight}),o.top/=i.length,o.left/=i.length,o.right/=i.length,o.bottom/=i.length,n&&(o.top-=n.top,o.left-=n.left,o.right-=n.left,o.bottom-=n.top),o.top),n=(o.left+o.right)/2,s=e.outerWidth(),r=e.outerHeight(),a=w(c).width(),l=w(c).scrollTop(),d=this.s.bubbleLocation,u="auto"!==d?d:this.s.bubbleBottom?"bottom":"top",u=(t.css({left:n,top:"bottom"===u?o.bottom:i}).toggleClass("below","bottom"===u),t.position()),d=("auto"===d&&(e.length&&u.top+r>l+c.innerHeight&&0<u.top-r?(t.css("top",i).removeClass("below"),this.s.bubbleBottom=!1):e.length&&u.top-r<l&&(t.css("top",o.bottom).addClass("below"),this.s.bubbleBottom=!0)),0),d=n+s/2<a-15?-s/2:-(s-(a-n-15));return e.css("left",d=n+d<15?15-n:d),this}function pt(t){var s=this;return"_basic"===t?t=[{action:function(){this.submit()},text:this.i18n(null,this.s.action+".submit"),className:this.classes.form.buttonSubmit}]:Array.isArray(t)||(t=[t]),w(this.dom.buttons).empty(),w.each(t,function(t,e){var i=(e="string"==typeof e?{action:function(){this.submit()},text:e,className:s.classes.form.buttonSubmit}:e).text||e.label,n=e.action||e.fn,o=e.attr||{};w("<button></button>",{class:s.classes.form.button+(e.className?" "+e.className:"")}).html("function"==typeof i?i(s):i||"").attr("tabindex",void 0!==e.tabIndex?e.tabIndex:0).attr(o).on("keyup",function(t){13===t.which&&n&&n.call(s)}).on("keypress",function(t){13===t.which&&t.preventDefault()}).on("click",function(t){t.preventDefault(),n&&n.call(s,t)}).appendTo(s.dom.buttons)}),this}function ht(t){var i=this,e=this.s.fields;return"string"==typeof t?(i.field(t).destroy(),delete e[t],e=w.inArray(t,this.s.order),this.s.order.splice(e,1),-1!==(e=w.inArray(t,this.s.includeFields))&&this.s.includeFields.splice(e,1)):w.each(this._fieldNames(t),function(t,e){i.clear(e)}),this}function ft(){return this._close(!1),this}function mt(t,e,i,n){var o=this,s=this,r=this.s.fields,a=1;if(!this._tidy(function(){s.create(t,e,i,n)})){"number"==typeof t&&(a=t,t=e,e=i),this.s.editFields={};for(var l=0;l<a;l++)this.s.editFields[l]={fields:this.s.fields};var d=this._crudArgs(t,e,i,n);this.s.mode="main",this.s.action="create",this.s.modifier=null,this.dom.form.style.display="block",this._actionClass(),this._displayReorder(this.fields()),w.each(r,function(t,e){var i=e.def();e.multiReset();for(var n=0;n<a;n++)e.multiSet(n,i,!1);e.set(i)}),this._event("initCreate",null,function(){o._assembleMain(),o._formOptions(d.opts),d.maybeOpen()})}return this}function vt(t){if(Array.isArray(t))for(var e=0,i=t.length;e<i;e++)this.undependent(t[e]);else w(this.field(t).node()).off(".edep");return this}function bt(t,n,e){var o=this;if(Array.isArray(t))for(var i=0,s=t.length;i<s;i++)this.dependent(t[i],n,e);else{var r=this,a=this.field(t),l={dataType:"json",type:"POST"},d=w.extend({},{data:null,event:"change",postUpdate:null,preUpdate:null},e),u=function(n){d.preUpdate&&d.preUpdate(n),w.each({errors:"error",labels:"label",messages:"message",options:"update",values:"val"},function(t,i){n[t]&&w.each(n[t],function(t,e){r.field(t)[i](e)})}),w.each(["hide","show","enable","disable"],function(t,e){n[e]&&r[e](n[e],n.animate)}),d.postUpdate&&d.postUpdate(n),a.processing(!1)};w(a.node()).on(d.event+".edep",function(t){var e,i;0===w(a.node()).find(t.target).length&&a.node()!==t.target||(a.processing(!0),(e={}).rows=o.s.editFields?h(o.s.editFields,"data"):null,e.row=e.rows?e.rows[0]:null,e.values=o.val(),d.data&&(i=d.data(e))&&(e=i),"function"==typeof n?(i=n.call(o,a.val(),e,u,t))&&("object"==typeof i&&"function"==typeof i.then?i.then(function(t){t&&u(t)}):u(i)):(w.isPlainObject(n)?w.extend(l,n):l.url=n,w.ajax(w.extend(l,{data:e,success:u}))))})}return this}function _t(){this.s.displayed&&this.close(),this.clear(),this.s.template&&w("body").append(this.s.template);var t=this.s.displayController;t.destroy&&t.destroy(this),w(y).off(".dte"+this.s.unique),w(c).off(".dte"+this.s.unique),w(y).trigger("destroyEditor",[this]),this.dom=null,this.s=null}function yt(t){var i=this;return w.each(this._fieldNames(t),function(t,e){i.field(e).disable()}),this}function gt(t){return void 0===t?this.s.displayed:this[t?"open":"close"]()}function wt(){return w.map(this.s.fields,function(t,e){return t.displayed()?e:null})}function Tt(){return this.s.displayController.node(this)}function xt(t,e,i,n,o){var s,r=this,a=this;return this._tidy(function(){a.edit(t,e,i,n,o)})||(s=this._crudArgs(e,i,n,o),this._editRefresh(t,function(){return r._dataSource("fields",t)},"main",s.opts,function(){r._assembleMain(),r._formOptions(s.opts),s.maybeOpen()})),this}function Et(t){var i=this;return w.each(this._fieldNames(t),function(t,e){i.field(e).enable()}),this}function Dt(t,e){var i=w(this.dom.wrapper);return void 0===e?(this._message(this.dom.formError,t,!0,function(){i.toggleClass("inFormError",void 0!==t&&""!==t)}),t&&!w(this.dom.formError).is(":visible")&&alert(t.replace(/<br>/g,"\n")),this.s.globalError=t):this.field(t).error(e),this}function Ct(t){var e=this.s.fields;if(e[t])return e[t];throw new Error("Unknown field name - "+t)}function kt(){return w.map(this.s.fields,function(t,e){return e})}function Ft(t,e){var i=this.files(t);if(i[e])return i[e];throw new Error("Unknown file id "+e+" in table "+t)}function jt(t){if(!t)return P.files;var e=P.files[t];if(e)return e;throw new Error("Unknown file table name: "+t)}function Ot(t){var i,n=this;return t=t||this.fields(),Array.isArray(t)?(i={},w.each(t,function(t,e){i[e]=n.field(e).get()}),i):this.field(t).get()}function At(t,i){var n=this;return w.each(this._fieldNames(t),function(t,e){n.field(e).hide(i)}),this}function St(t,e,i){return null!=t?t:(t=void 0===(t=ot.util.get(e)(this.s.i18n))?i:t)||""}function It(i){return void 0===i&&(i=!1),w.map(this.s.editFields,function(t,e){return!0===i?"#"+e:e})}function Pt(t){if(this.s.globalError)return!0;for(var e=this._fieldNames(t),i=0,n=e.length;i<n;i++)if(this.field(e[i]).inError())return!0;return!1}function Rt(t,e,i){function n(){return o._dataSource("individual",t,e)}var o=this,s=this,r=(w.isPlainObject(e)&&(i=e,e=void 0),i=w.extend({},this.s.formOptions.inline,i),n()),a=Object.keys(r);if(1<a.length)throw new Error("Cannot edit more than one row inline at a time");for(var l=[],d=0,u=r[a[0]].attach;d<u.length;d++){var c=u[d];l.push(c)}return w("div.DTE_Field",l).length||this._tidy(function(){s.inline(t,e,i)})||this._editRefresh(t,n,"inline",i,function(){o._inline(r,i)}),this}function Nt(t,e){var i=this;return w.isPlainObject(t)&&(e=t,t=null),this._tidy(function(){i.inlineCreate(t,e)})||(w.each(this.s.fields,function(t,e){e.multiReset(),e.multiSet(0,e.def())}),this.s.mode="main",this.s.action="create",this.s.modifier=null,this.s.editFields=this._dataSource("fakeRow",t),e=w.extend({},this.s.formOptions.inline,e),this._actionClass(),this._inline(this.s.editFields,e,function(){i._dataSource("fakeRowEnd")}),this._event("initCreate",null)),this}function Bt(t,e){return void 0===e?this._message(this.dom.formInfo,t):this.field(t).message(e),this}function Lt(t){if(!t)return this.s.action;if(!this.s.action)throw new Error("Not currently in an editing mode");if("create"===this.s.action&&"create"!==t)throw new Error("Changing from create mode is not supported");return this.s.action=t,this}function Ht(){return this.s.modifier}function Mt(t){var i,n=this;return void 0===t&&(t=this.fields()),Array.isArray(t)?(i={},w.each(t,function(t,e){i[e]=n.field(e).multiGet()}),i):this.field(t).multiGet()}function Vt(t,e){var i=this;return w.isPlainObject(t)&&void 0===e?w.each(t,function(t,e){i.field(t).multiSet(e)}):this.field(t).multiSet(e),this}function Ut(t){var e=this;return t=t||this.order(),Array.isArray(t)?w.map(t,function(t){return e.field(t).node()}):this.field(t).node()}function qt(t,e){return w(this).off(this._eventName(t),e),this}function Wt(t,e){return w(this).on(this._eventName(t),e),this}function zt(t,e){return w(this).one(this._eventName(t),e),this}function Jt(){var e=this;return this._displayReorder(),this._closeReg(function(){e._nestedClose(function(){e._clearDynamicInfo(),e._event("closed",["main"])})}),this._preopen("main")&&(this._nestedOpen(function(){e._focus(w.map(e.s.order,function(t){return e.s.fields[t]}),e.s.editOpts.focus),e._event("opened",["main",e.s.action])},this.s.editOpts.nest),this._postopen("main",!1)),this}function Gt(t){if(!t)return this.s.order;if(arguments.length&&!Array.isArray(t)&&(t=Array.prototype.slice.call(arguments)),this.s.order.slice().sort().join("-")!==t.slice().sort().join("-"))throw new Error("All fields, and no additional fields, must be provided for ordering.");return w.extend(this.s.order,t),this._displayReorder(),this}function Xt(e,i){var t,n=this,o=this.s.action;this.s.action="read",this._ajax(((t={})[this.s.actionName]="read",t.ids=e,t),function(t){n._dataSource("reload",e,t.data),n.s.action=o,i()},function(){i()})}function $t(t,e,i,n,o){var s,r,a,l,d=this,u=this;return this._tidy(function(){u.remove(t,e,i,n,o)})||(void 0===(t=t||this.s.table?t:"keyless").length&&(t=[t]),s=this._crudArgs(e,i,n,o),a=(r=function(){return d._dataSource("fields",t)})(),l=Object.keys(a),s.opts.refresh&&l.length?this.refresh(l,function(){d._remove(t,s,r())}):this._remove(t,s,a)),this}function Qt(t,e){var i,n=this;return w.isPlainObject(t)||((i={})[t]=e,t=i),w.each(t,function(t,e){n.field(t).set(e)}),this}function Zt(t,i){var n=this;return w.each(this._fieldNames(t),function(t,e){n.field(e).show(i)}),this}function Kt(e,i,n,o){var s,t,r=this,a=this.s.fields,l=[],d=0,u=!1;return!this.s.processing&&this.s.action&&(this._processing(!0),s=function(){l.length!==d||u||r._event("initSubmit",[r.s.action],function(t){!1===t?r._processing(!1):(u=!0,r._submit(e,i,n,o))})},t=y.activeElement,0!==w(t).closest("div.DTE_Field").length&&t.blur(),this.error(),w.each(a,function(t,e){e.inError()&&l.push(t)}),w.each(l,function(t,e){a[e].error("",function(){d++,s()})}),s()),this}function Yt(t){return void 0===t?this.s.table:(this.s.table=t,this)}function te(t){return void 0===t?this.s.template:(this.s.template=null===t?null:w(t),this)}function ee(t){return void 0===t?this.s.title:("function"==typeof t&&(t=t(this,new ot.Api(this.s.table))),this.s.title=t,this._drawTitle(),this)}function ie(t,e){return void 0!==e||w.isPlainObject(t)?this.set(t,e):this.get(t)}function ne(t,e,i){e=e?t+" For more information, please refer to https://datatables.net/tn/"+e:t;if(i=void 0===i?!0:i)throw e;console.warn(e)}function oe(t,e,i){var n,o,s;if(e=w.extend({label:"label",value:"value"},e),Array.isArray(t))for(n=0,o=t.length;n<o;n++)s=t[n],w.isPlainObject(s)?i(void 0===s[e.value]?s[e.label]:s[e.value],s[e.label],n,s.attr):i(s,s,n);else n=0,w.each(t,function(t,e){i(e,t,n),n++})}function se(s,r,a,l,d){var u=new FileReader,c=0,p=[],h=r.errors&&r.errors._?r.errors._:"A server error occurred while uploading the file",f=r._many?"field.uploadMany.":"field.upload.";s.error(r.name,""),"function"==typeof r.ajax?r.ajax(a,function(t){d.call(s,t)}):(l.call(s,r,s.i18n(r.fileReadText,f+"uploading")),u.onload=function(t){var e,i=new FormData;if(i.append("action","upload"),i.append("uploadField",r.name),i.append("upload",a[c]),r.ajaxData&&r.ajaxData(i,a[c],c),r.ajax?e=r.ajax:w.isPlainObject(s.s.ajax)?e=s.s.ajax.upload||s.s.ajax:"string"==typeof s.s.ajax&&(e=s.s.ajax),!e)throw new Error("No Ajax option specified for upload plug-in");if("function"==typeof(e="string"==typeof e?{url:e}:e).data){var n={},o=e.data(n);w.each(n=void 0!==o&&"string"!=typeof o?o:n,function(t,e){i.append(t,e)})}else if(w.isPlainObject(e.data))throw new Error("Upload feature cannot use `ajax.data` with an object. Please use it as a function instead.");s._event("preUpload",[r.name,a[c],i],function(t){var o;!1===t?c<a.length-1?(c++,u.readAsDataURL(a[c])):d.call(s,p):(o=!1,s.on("preSubmit.DTE_Upload",function(){return!(o=!0)}),w.ajax(w.extend({},e,{contentType:!1,data:i,dataType:"json",error:function(t){var e=r.errors;s.off("preSubmit.DTE_Upload"),s.error(r.name,e&&e[t.status]?e[t.status]:h),s._event("uploadXhrError",[r.name,t]),l.call(s,r)},processData:!1,success:function(t){if(s.off("preSubmit.DTE_Upload"),s._event("uploadXhrSuccess",[r.name,t]),t.fieldErrors&&t.fieldErrors.length){for(var e=t.fieldErrors,i=0,n=e.length;i<n;i++)s.error(e[i].name,e[i].status);d.call(s,p,!0)}else t.error?(s.error(t.error),d.call(s,p,!0)):t.upload&&t.upload.id?(t.files&&w.each(t.files,function(t,e){P.files[t]||(P.files[t]={}),w.extend(P.files[t],e)}),p.push(t.upload.id),c<a.length-1?(c++,u.readAsDataURL(a[c])):(d.call(s,p),o&&s.submit())):(s.error(r.name,h),d.call(s,p,!0));l.call(s,r)},type:"post",xhr:function(){var t=w.ajaxSettings.xhr();return t.upload&&(t.upload.onprogress=function(t){t.lengthComputable&&(t=(t.loaded/t.total*100).toFixed(0)+"%",l.call(s,r,1===a.length?t:c+":"+a.length+" "+t))},t.upload.onloadend=function(){l.call(s,r,s.i18n(r.processingText,f+"processing"))}),t}})))})},a=w.map(a,function(t){return t}),void 0!==r._limitLeft&&a.splice(r._limitLeft,a.length),u.readAsDataURL(a[0]))}function re(t,e){var i=!1;return t&&t.document&&(y=(c=t).document),e&&e.fn&&e.fn.jquery&&(w=e,i=!0),i}var ae=w.fn.dataTable,le=0;function de(){var t=this.classes.actions,e=this.s.action,i=w(this.dom.wrapper);i.removeClass([t.create,t.edit,t.remove].join(" ")),"create"===e?i.addClass(t.create):"edit"===e?i.addClass(t.edit):"remove"===e&&i.addClass(t.remove)}function ue(i,n,o){var s,t,r=this.s.action,a={complete:[function(t,e){var i=null;if(204===t.status||"null"===t.responseText)i={};else try{i=t.responseJSON||JSON.parse(t.responseText)}catch(t){}w.isPlainObject(i)||Array.isArray(i)?n(i,400<=t.status,t):o(t,e,s)}],data:null,dataType:"json",error:[function(t,e,i){s=i}],success:[],type:"POST"},e=this.s.ajax,l="edit"===r||"remove"===r?h(this.s.editFields,"idSrc").join(","):null;"function"==typeof(e=w.isPlainObject(e)&&e[r]?e[r]:e)?e.call(this,null,null,i,n,o):("string"==typeof e?-1!==e.indexOf(" ")?(t=e.split(" "),a.type=t[0],a.url=t[1]):a.url=e:((t=w.extend({},e||{})).complete&&(a.complete.unshift(t.complete),delete t.complete),t.error&&(a.error.unshift(t.error),delete t.error),a=w.extend({},a,t)),a.replacements&&w.each(a.replacements,function(t,e){a.url=a.url.replace("{"+t+"}",e.call(this,t,l,r,i))}),a.url=a.url.replace(/_id_/,l).replace(/{id}/,l),a.data&&(t=(e="function"==typeof a.data)?a.data(i):a.data,i=e&&t?t:w.extend(!0,i,t)),a.data=i,"DELETE"!==a.type||void 0!==a.deleteBody&&!0!==a.deleteBody||(e=w.param(a.data),a.url+=-1===a.url.indexOf("?")?"?"+e:"&"+e,delete a.data),"json"===a.submitAs&&"object"==typeof i&&(a.data=JSON.stringify(i)),w.ajax(a))}function ce(t,e,i,n){w.fn.animate?t.stop().animate(e,i,n):(t.css(e),e=t.length&&1<t.length?t[0]:t,"function"==typeof i?i.call(e):n&&n.call(e))}function pe(){var t=this.dom;w(t.wrapper).prepend(t.header).append(t.processing).append(t.body).append(t.footer),w(t.footer).append(t.formError).append(t.buttons),w(t.bodyContent).append(t.formInfo).append(t.form)}function he(){var t=this.s.editOpts.onBlur;!1!==this._event("preBlur")&&("function"==typeof t?t(this):"submit"===t?this.submit():"close"===t&&this._close())}function fe(i){var t,e;void 0===i&&(i=!1),this.s&&(t=this.classes.field.error,e=this.s.fields,w("div."+t,this.dom.wrapper).removeClass(t),w.each(e,function(t,e){e.error(""),i||e.message("")}),this.error(""),i||this.message(""),this.s.setFocus=null,this.s.bubbleBottom=!1)}function me(t,e){var i;!1!==this._event("preClose")&&(this.s.closeCb&&(i=this.s.closeCb(t,e),this.s.closeCb=null),this.s.closeIcb&&(this.s.closeIcb(),this.s.closeIcb=null),w("body").off("focus.editor-focus"),this.s.displayed=!1,this._event("close"),i)&&this._event("closed",[i])}function ve(t){this.s.closeCb=t}function be(t,e,i,n){var o,s,r,a=this,t=w.isPlainObject(t)?t:"boolean"==typeof t?(r=t,e):(o=t,s=e,r=i,n);return void 0===r&&(r=!0),o&&a.title(o),s&&a.buttons(s),{maybeOpen:function(){r&&a.open()},opts:w.extend({},this.s.formOptions.main,t)}}function _e(t){for(var e=[],i=1;i<arguments.length;i++)e[i-1]=arguments[i];t=(this.s.table?P.dataSources.dataTable:P.dataSources.html)[t];if(t)return t.apply(this,e)}function ye(i){var n=this,o=w(this.dom.formContent),s=this.s.fields,t=this.s.order,r=this.s.template,a=this.s.mode||"main";i?this.s.includeFields=i:i=this.s.includeFields,o.children().detach(),w.each(t,function(t,e){-1!==n._weakInArray(e,i)&&(r&&"main"===a?(r.find('editor-field[name="'+e+'"]').after(s[e].node()),r.find('[data-editor-template="'+e+'"]')):o).append(s[e].node())}),r&&r.length&&"main"===a&&r.appendTo(o),this._event("displayOrder",[this.s.displayed,this.s.action,o])}function ge(){var t=w(this.dom.header).children("div."+this.classes.header.content),e=this.classes.header.title,i=this.s.displayController._show,n=[];if(i&&i.length)for(var o=0;o<i.length;o++)n.push('<span class="DTE_Title">'+i[o].dte.title()+"</span>");else n.push('<span class="DTE_Title">'+this.title()+"</span>");var s=n.join('<span class="DTE_Title_Level"></span>');e.tag?t.empty().append(w("<"+e.tag+"></"+e.tag).addClass(e.class).html(s)):t.html(s)}function we(t,e,i,r,n){for(var a,o=this,s=this.s.fields,l=[],d={},u=(this.s.editFields=e,this.s.editData=d,this.s.modifier=t,this.s.action="edit",this.dom.form.style.display="block",this.s.mode=i,this._actionClass(),w.each(s,function(o,s){s.multiReset(),a=!1,d[o]={},w.each(e,function(t,e){var i,n;e.fields[o]&&(i=s.valFromData(e.data),n=s.nullDefault(),d[o][t]=null===i?"":Array.isArray(i)?i.slice():i,r&&"row"!==r.scope?e.displayFields&&!e.displayFields[o]||(s.multiSet(t,void 0===i||n&&null===i?s.def():i,!1),a=!0):(s.multiSet(t,void 0===i||n&&null===i?s.def():i,!1),e.displayFields&&!e.displayFields[o]||(a=!0)))}),s._multiValueCheck(),0!==s.multiIds().length&&a&&l.push(o)}),this.order().slice()),c=u.length-1;0<=c;c--)-1===w.inArray(u[c].toString(),l)&&u.splice(c,1);this._displayReorder(u),this._event("initEdit",[h(e,"node")[0],h(e,"data")[0],t,i],function(){o._event("initMultiEdit",[e,t,i],function(){n()})})}function Te(t,e,i,n,o){var s=this,r=e(),a=Object.keys(r);n.refresh&&a.length?this.refresh(a,function(){r=e(),s._edit(t,r,i,n,o)}):this._edit(t,r,i,n,o)}function xe(t,e,i){var n;if(void 0===e&&(e=[]),void 0===i&&(i=void 0),!Array.isArray(t))return n=w.Event(t),w(this).triggerHandler(n,e),n=n.result,0===t.indexOf("pre")&&!1===n&&w(this).triggerHandler(w.Event(t+"Cancelled"),e),i&&(n&&"object"==typeof n&&n.then?n.then(i):i(n)),n;for(var o=0,s=t.length;o<s;o++)this._event(t[o],e)}function Ee(t){for(var e=t.split(" "),i=0,n=e.length;i<n;i++){var o,s=(o=e[i]).match(/^on([A-Z])/);s&&(o=s[1].toLowerCase()+o.substring(3)),e[i]=o}return e.join(" ")}function De(i){var n=null;return w.each(this.s.fields,function(t,e){w(e.node()).find(i).length&&(n=e)}),n}function Ce(t){return void 0===t?this.fields():Array.isArray(t)?t:[t]}function ke(t,e){var i,n=this;"remove"!==this.s.action&&(t=w.map(t,function(t){return"string"==typeof t?n.s.fields[t]:t}),"number"==typeof e?i=t[e]:e?i=0===e.indexOf("jq:")?w("div.DTE "+e.replace(/^jq:/,"")):this.s.fields[e]:y.activeElement.blur(),this.s.setFocus=i)&&i.focus()}function Fe(n){var o=this,s=this,t=le++,e=".dteInline"+t;return this.s.editOpts=n,this.s.editCount=t,"string"!=typeof n.title&&"function"!=typeof n.title||(this.title(n.title),n.title=!0),"string"!=typeof n.message&&"function"!=typeof n.message||(this.message(n.message),n.message=!0),"boolean"!=typeof n.buttons&&(this.buttons(n.buttons),n.buttons=!0),w(y).on("keydown"+e,function(t){var e,i;13===t.which&&o.s.displayed&&(e=w(y.activeElement))&&(i=o._fieldFromNode(e))&&"function"==typeof i.canReturnSubmit&&i.canReturnSubmit(e)&&t.preventDefault()}),w(y).on("keyup"+e,function(t){var e,i=w(y.activeElement);13===t.which&&o.s.displayed?(e=o._fieldFromNode(i))&&"function"==typeof e.canReturnSubmit&&e.canReturnSubmit(i)&&("submit"===n.onReturn?(t.preventDefault(),o.submit()):"function"==typeof n.onReturn&&(t.preventDefault(),n.onReturn(o,t))):27===t.which?w("div.dt-datetime, div.dte-dropdown").length||t.isDefaultPrevented()||(t.preventDefault(),"function"==typeof n.onEsc?n.onEsc(s,t):"blur"===n.onEsc?s.blur():"close"===n.onEsc?s.close():"submit"===n.onEsc&&s.submit()):i.parents(".DTE_Form_Buttons").length&&(37===t.which?i.prev("button").trigger("focus"):39===t.which&&i.next("button").trigger("focus"))}),this.s.closeIcb=function(){w(y).off("keydown"+e),w(y).off("keyup"+e)},e}function je(t,e,i){for(var n,a=this,o=(void 0===i&&(i=null),!1),s=this.classes.inline,r=t[Object.keys(t)[0]],l=[],d=0;d<r.attach.length;d++){var u=r.attachFields[d][0];l.push({field:this.s.fields[u],name:u,node:w(r.attach[d])})}var c=this._formOptions(e);if(!this._preopen("inline"))return this;for(var p=0,h=l;p<h.length;p++){var f=h[p],m=f.node,v=(f.children=m.contents().detach(),-1!==navigator.userAgent.indexOf("Edge/")?'style="width:'+m.width()+'px"':""),v=(m.append(w('<div class="'+s.wrapper+'"><div class="'+s.liner+'" '+v+'><div class="DTE_Processing_Indicator"><span></span></div></div><div class="'+s.buttons+'"></div></div>')),m.find("div."+s.liner.replace(/ /g,".")).append(f.field.node()).append(this.dom.formError),w(f.field.node()).closest("tr"));v.length&&(n=v),e.buttons&&m.find("div."+s.buttons.replace(/ /g,".")).append(this.dom.buttons)}var b=this._inputTrigger("submit",e,n),_=this._inputTrigger("cancel",e,n);this._closeReg(function(t,e){return o=!0,w(y).off("click"+c),t&&"edit"===e||l.forEach(function(t){t.node.contents().detach(),t.node.append(t.children)}),b(),_(),a._clearDynamicInfo(),i&&i(),"inline"}),setTimeout(function(){var s,r;o||(s=w.fn.addBack?"addBack":"andSelf",w(y).on("mousedown"+c,function(t){r=t.target}).on("keydown"+c,function(t){r=t.target}).on("click"+c,function(t){for(var e=!1,i=0,n=l;i<n.length;i++){var o=n[i];!o.field._typeFn("owns",r)&&-1===w.inArray(o.node[0],w(r).parents()[s]())||(e=!0)}e||a.blur()}))},0),this._focus(w.map(l,function(t){return t.field}),e.focus),this._postopen("inline",!0)}function Oe(e,t,i){var n,o=this,s=t[e+"Trigger"],t=t[e+"Html"],r="click.dte-"+e,i=w(i).closest("tr");if(void 0===s)return function(){};"number"==typeof s&&(n=i.children(),s=s<0?n[n.length+s]:n[s]);var a=w(s,i).length?Array.prototype.slice.call(w(s,i)[0].childNodes):[],l=(w(a).detach(),w(s,i).on(r,function(t){t.stopImmediatePropagation(),"cancel"===e?o.close():o.submit()}).append(t));return function(){l.off(r).empty().append(a)}}function Ae(n){var o=this;n&&n.options&&w.each(this.s.fields,function(t,e){var i;void 0===n.options[t]||(i=o.field(t)).dt&&i.dt().ajax.url()||i&&i.update&&i.update(n.options[t])})}function Se(t,e,i,n){var o=!!w.fn.animate;void 0===i&&(i=!1),n=n||function(){},"function"==typeof e&&(e=e(this,new ae.Api(this.s.table))),t=w(t),o&&t.stop(),e?(n(),this.s.displayed&&o?t.html(e).fadeIn():t.html(e).css("display","block"),i&&t.attr("title",e)):(this.s.displayed&&o?t.fadeOut(function(){t.html(""),n()}):(t.html("").css("display","none"),n()),i&&t.removeAttr("title"))}function Ie(){var t,e=this.s.fields,i=this.s.includeFields,n=!0;if(i)for(var o=0,s=i.length;o<s;o++){var r=e[i[o]],a=r.multiEditable();r.isMultiValue()&&a&&n?n=!(t=!0):t=!(!r.isMultiValue()||a),e[i[o]].multiInfoShown(t)}}function Pe(t){var e,i=this.s.displayController._show;i&&i.length?1<i.length?(i.pop(),e=i[i.length-1],t&&t(),this.s.displayController.open(e.dte,e.append,e.callback)):(this.s.displayController.close(this,t),i.length=0):t&&t()}function Re(t,e){var i=this.s.displayController;i._show||(i._show=[]),e||(i._show.length=0),i._show.push({append:this.dom.wrapper,callback:t,dte:this}),this.s.displayController.open(this,this.dom.wrapper,t),this._drawTitle()}function Ne(t,e){var i=this,n=this.s.displayController.captureFocus;return void 0===n&&(n=!0),w(this.dom.form).off("submit.editor-internal").on("submit.editor-internal",function(t){t.preventDefault()}),!n||"main"!==t&&"bubble"!==t||w("body").on("focus.editor-focus",function(){0===w(y.activeElement).parents(".DTE").length&&0===w(y.activeElement).parents(".DTED").length&&i.s.setFocus&&i.s.setFocus.focus()}),this._multiInfo(),this._event("open",[t,this.s.action]),e&&this._event("opened",[t,this.s.action]),!0}function Be(t){return!1===this._event("preOpen",[t,this.s.action])?(this._clearDynamicInfo(),this._event("cancelOpen",[t,this.s.action]),"inline"!==this.s.mode&&"bubble"!==this.s.mode||!this.s.closeIcb||this.s.closeIcb(),this.s.closeIcb=null,!1):(this._clearDynamicInfo(!0),this.s.displayed=t,!0)}function Le(t){var e=this.classes.processing.active;w(["div.DTE",this.dom.wrapper]).toggleClass(e,t),this.s.processing=t,this._event("processing",[t])}function He(t){var i=!1;return w.each(this.s.fields,function(t,e){e.processing()&&(i=!0)}),i&&this.one("processing-field",function(){!0===this._noProcessing(t)&&this._submit.apply(this,t)}),!i}function Me(t,e,i){var n=this;this.s.action="remove",this.s.modifier=t,this.s.editFields=i,this.dom.form.style.display="none",this._actionClass(),this._event("initRemove",[h(i,"node"),h(i,"data"),t],function(){n._assembleMain(),n._formOptions(e.opts),e.maybeOpen();var t=n.s.editOpts;null!==t.focus&&setTimeout(function(){n.dom&&w("button",n.dom.buttons).eq(t.focus).focus()},100)})}function Ve(n,o,t,s){var r,a=this,d=!1,e={},i={},u=_,c=this.s.fields,l=this.s.editCount,p=this.s.editFields,h=this.s.editData,f=this.s.editOpts,m=f.submit;if(!1===this._noProcessing(arguments))P.error("Field is still processing",16,!1);else{var v=this.s.action,b={data:{}};if("create"===(b[this.s.actionName]=v)||"edit"===v)if(w.each(p,function(s,r){var a={},l={};w.each(c,function(t,e){var i,n,o;r.fields[t]&&e.submittable()&&(o=e.multiGet(),i=u(t),void 0===o[s]?(n=e.valFromData(r.data),i(a,n)):(n=o[s],o=Array.isArray(n)&&"string"==typeof t&&-1!==t.indexOf("[]")?u(t.replace(/\[.*$/,"")+"-many-count"):null,i(a,n),o&&o(a,n.length),"edit"!==v||h[t]&&e.compare(n,h[t][s])||(i(l,n),d=!0,o&&o(l,n.length))))}),w.isEmptyObject(a)||(e[s]=a),w.isEmptyObject(l)||(i[s]=l)}),"create"===v||"all"===m||"allIfChanged"===m&&d)b.data=e;else{if("changed"!==m||!d)return this.s.action=null,"close"!==f.onComplete||void 0!==s&&!s?"function"==typeof f.onComplete&&f.onComplete(this):this._close(!1),n&&n.call(this),this._processing(!1),void this._event("submitComplete");b.data=i}else"remove"===v&&w.each(p,function(t,e){b.data[t]=e.data});r=w.extend(!0,{},b),t&&t(b),this._event("preSubmit",[b,v],function(t){!1===t?a._processing(!1):(a.s.ajax?a._ajax:a._submitTable).call(a,b,function(t,e,i){a._submitSuccess(t,e,b,r,a.s.action,l,s,n,o,i)},function(t,e,i){a._submitError(t,e,i,o,b,a.s.action)})})}}function Ue(t,e,i){var o,s=t.action,r={data:[]},a=u(this.s.idSrc),l=_(this.s.idSrc);"remove"!==s&&(o="main"===this.s.mode?this._dataSource("fields",this.modifier()):this._dataSource("individual",this.modifier()),w.each(t.data,function(t,e){var i,n=d,n=(i="edit"===s?(i=n({},o[t].data),n(i,e)):n({},e),a(i));l(i,"create"===s&&void 0===n?+new Date+t.toString():n),r.data.push(i)})),e(r)}function qe(t,e,i,n,o,s,r,a,l,d){var u=this,c=this.s.fields,p=this.s.editOpts,h=this.s.modifier;if(this._event("postSubmit",[t,i,o,d]),t.error||(t.error=""),t.fieldErrors||(t.fieldErrors=[]),e||t.error||t.fieldErrors.length){var f=[];t.error&&f.push(t.error),w.each(t.fieldErrors,function(t,e){var i=c[e.name];if(!i)throw new Error("Unknown field: "+e.name);i.displayed()?(i.error(e.status||"Error"),0===t&&("focus"===p.onFieldError?(u._animate(w(u.dom.bodyContent),{scrollTop:w(i.node()).position().top},500),i.focus()):"function"==typeof p.onFieldError&&p.onFieldError(u,e))):f.push(i.name()+": "+(e.status||"Error"))}),this.error(f.join("<br>")),this._event("submitUnsuccessful",[t]),l&&l.call(this,t)}else{var m={};if(!t.data||"create"!==o&&"edit"!==o)"remove"===o&&(this._dataSource("prep",o,h,n,t,m),this._event("preRemove",[t,this.ids()]),this._dataSource("remove",h,c,m),this._event(["remove","postRemove"],[t,this.ids()]),this._dataSource("commit",o,h,t.data,m));else{this._dataSource("prep",o,h,n,t,m);for(var v=0,b=t.data;v<b.length;v++){var _=b[v],y=_,g=this._dataSource("id",_);this._event("setData",[t,_,o]),"create"===o?(this._event("preCreate",[t,_,g]),this._dataSource("create",c,_,m),this._event(["create","postCreate"],[t,_,g])):"edit"===o&&(this._event("preEdit",[t,_,g]),this._dataSource("edit",h,c,_,m),this._event(["edit","postEdit"],[t,_,g]))}this._dataSource("commit",o,h,t.data,m)}this._optionsUpdate(t),s===this.s.editCount&&(i=this.s.action,"continue"!==p.onComplete)&&!1!==r&&(this.s.action=null,"close"!==p.onComplete||void 0!==r&&!r?"function"==typeof p.onComplete&&p.onComplete(this):this._close(!!t.data,i)),a&&a.call(this,t),this._event("submitSuccess",[t,y,o])}this._processing(!1),this._event("submitComplete",[t,y,o])}function We(t,e,i,n,o,s){this._event("postSubmit",[null,o,s,t]),this.error(this.i18n(null,"error.system")),this._processing(!1),n&&n.call(this,t,e,i),this._event(["submitError","submitComplete"],[t,e,i,o])}function ze(i){var n=this,o=this.s.table?new ae.Api(this.s.table):null,s=!1;return o&&(s=o.settings()[0].oFeatures.bServerSide),this.s.processing?(this.one("submitComplete",function(){s&&n.s.processing?o.one("draw",i):setTimeout(function(){i()},10)}),!0):("inline"===this.display()||"bubble"===this.display())&&(this.one("close",function(){n.s.processing?n.one("submitComplete",function(t,e){s&&e?o.one("draw",i):setTimeout(function(){n.s&&i()},10)}):setTimeout(function(){n.s&&i()},10)}).blur(),!0)}function Je(t,e){for(var i=0,n=e.length;i<n;i++)if(t==e[i])return i;return-1}E.prototype.attachTo=function(t){this.dom.attachTo=w(t)},E.prototype.asyncLabels=function(n,o){var s=this,t=n.map(function(t){return t.value}),e=w.extend({},this.c.ajaxData,{values:t});this.processing(!0),Object.keys(e).forEach(function(t){"function"==typeof e[t]&&(e[t]=e[t]())}),w.ajax({url:this.c.ajax,type:"POST",dataType:"json",data:e,success:function(t){s.options(t.data);for(var e=0;e<n.length;e++){var i=s.label(n[e].value);o(n[e],i)}s.processing(!1)}})},E.prototype.blur=function(e){var i=this;return this.s.showTo=setTimeout(function(){var t=y.activeElement.tagName.toLowerCase();y.activeElement===e||i.dom.host.find(y.activeElement).length||["input","select","button"].includes(t)&&i.hide()},10),this},E.prototype.destroy=function(){this.hide(),this.s.dt.destroy(),w(y).off("click.dte-dropdown")},E.prototype.filter=function(t){var e=this;return this.s.searchTerm=t,this.dom.search.val()!==t&&this.dom.search.val(t),this.c.ajax?t?(this.processing(!0),w.ajax({url:this.c.ajax,type:"POST",dataType:"json",data:w.extend({},this.c.ajaxData,{search:t}),success:function(t){e.s.dt.clear().rows.add(t.data).draw(),e._listView(),e.processing(!1)}})):(this.s.dt.clear().draw(),this._listView()):this.s.dt.search(t).draw(),this},E.prototype.label=function(e){var t=this.options().find(function(t){return t.value===e}),i=this._renderer();return t?i(t,e):null},E.prototype.focus=function(){return this.s.dt.row(":first-child").focus(),this},E.prototype.hide=function(){var t="dte-dropdown",e=(this.s.shown=!1,this.dom.dropdown.detach(),w(y).off("keyup.dte-dropdown"),w(c).off("scroll."+t+" resize."+t),w("div.DTE_Body_Content").off("scroll."+t),w("div.dt-scroll-body").off("scroll."+t),this.dom.host[0].offsetParent);return e!==y.body&&w(e).off("scroll."+t),this},E.prototype.host=function(t){return this.dom.host=w(t),this._position(),this},E.prototype.options=function(t,e){void 0===e&&(e=!1);var i=this.s.dt;return void 0===t?i.rows().data().toArray():(!0!==e&&i.clear(),t.forEach(function(t){"string"==typeof t?i.row.add({label:t,value:t}):i.row.add(t)}),i.draw(),this)},E.prototype.owns=function(t){return 0<w(t).parents().filter(this.dom.dropdown).length},E.prototype.processing=function(t){return this.dom.processing.toggleClass("processing",t),this},E.prototype.show=function(t){var e=this,i=this,n="dte-dropdown",t=(this.s.shown=!0,this.dom.below=t?w(t):null,this.dom.dropdown.appendTo(this.dom.attachTo),this.s.dt.columns.adjust(),this._listView(),this._position(),w(c).on("scroll."+n+" resize."+n,function(){i._position()}),w("div.DTE_Body_Content").on("scroll."+n,function(){i._position()}),w("div.dt-scroll-body").on("scroll."+n,function(){i._position()}),this.dom.host[0].offsetParent);return t!==y.body&&w(t).on("scroll."+n,function(){i._position()}),clearTimeout(this.s.showTo),setTimeout(function(){w(y).on("click."+n,function(t){var t=t.target,e=w(t).parents();t===i.dom.host[0]||e.filter(i.dom.host).length||e.filter(i.dom.dropdown).length||i.hide()})},10),this.c.search&&this.dom.search.focus(),w(y).on("keyup.dte-dropdown",function(t){27===t.which&&(t.preventDefault(),t.stopImmediatePropagation(),e.hide())}),this},E.prototype._listView=function(){!this.c.ajax||this.s.searchTerm?(this.dom.placeholder.css("display","none"),this.dom.list.css("display","block")):(this.dom.placeholder.css("display","block"),this.dom.list.css("display","none"))},E.prototype._position=function(){var t,e,i,n;this.s.shown&&(t=this.dom.attachTo.offset(),e=this.dom.host.offset(),i=this.dom.dropdown,n=this.dom.below?this.dom.below.outerHeight()+this.dom.below.position().top:this.dom.host.outerHeight(),this.dom.attachTo[0]!==y.body&&(n-=t.top),i.css({top:e.top+n,left:e.left-t.left,width:this.dom.host.outerWidth()}))},E.prototype._renderer=function(){return this.c.renderer||(this.c.escapeHtml?function(t){return r.util.escapeHtml(t.label)}:function(t){return t.label})},E.defaults={ajax:null,ajaxData:{},escapeHtml:!0,i18n:{inputPlaceholder:"",noResults:"",title:"",placeholder:""},options:null,order:"asc",renderer:null,search:!1,select:null},E.classes={};var Ge=E;function E(t,e){var o=this,i=(this.s={dt:null,searchTerm:"",shown:!1,showTo:null},this.dom={attachTo:null,below:null,host:null,dropdown:null,header:null,list:null,placeholder:null,processing:null,search:null,table:null,title:null},this.dom),n=(this.c=w.extend({},E.defaults,e),i.host=w(t),i.attachTo=w(t),i.dropdown=w('<div class="dte-dropdown"><div class="dte-dropdown-header"></div><div class="dte-dropdown-list"><table></table></div><div class="dte-dropdown-placeholder"></div></div>'),i.table=i.dropdown.find("table"),i.header=i.dropdown.find("div.dte-dropdown-header"),i.list=i.dropdown.find("div.dte-dropdown-list"),i.title=w('<div class="dte-dropdown-title"></div>'),i.processing=w('<div class="dte-dropdown-processing"><span/></div>'),i.search=w('<input class="dte-dropdown-search" autocomplete="off" />'),i.placeholder=i.dropdown.find("div.dte-dropdown-placeholder").html(this.c.i18n.placeholder),this.c.i18n.title&&i.title.appendTo(i.header).html(this.c.i18n.title),this.c.search&&(e=function(t){o.filter(i.search.val())},i.processing.appendTo(i.header),i.search.css("display","block").appendTo(i.header).attr("placeholder",this.c.i18n.inputPlaceholder).on("keydown",function(t){40===t.which&&setTimeout(function(){o.focus()},50)}).on("input",this.c.ajax?r.util.debounce(e):e)),w.extend(!0,{},r.defaults.layout)),s=(w.each(n,function(t,e){n[t]=null}),this._renderer()),t=new r(i.table,{columns:[{data:"label",render:function(t,e,i){return s(i,i.value)}}],language:{emptyTable:this.c.i18n.noResults,zeroRecords:this.c.i18n.noResults},layout:n,paging:!1,select:{keys:!0,keysWrap:!0},order:!1===this.c.order?[]:[0,this.c.order]});(this.s.dt=t).on("select",function(t,e,i,n){e=e.row({selected:!0});o.c.select&&o.c.select(e.data().value),o.hide(),e.deselect()}),this.c.options&&this.options(this.c.options)}var Xe={create:function(){},disable:function(){},enable:function(){},get:function(){},set:function(){}};function $e(t,e){var i=t._many?"field.uploadMany.":"field.upload.";null==e&&(e=this.i18n(t.uploadText,i+"choose")),t._input.find("div.upload button").html(e)}function Qe(e,i,n,o,t){var s,r=i.classes.form.buttonInternal,a=w('<div class="editor_upload"><div class="eu_table"><div class="row"><div class="cell upload limitHide"><button class="'+r+'"></button><input type="file" '+((t=void 0===t?!1:t)?"multiple":"")+'></input></div><div class="cell clearValue"><button class="'+r+'"></button></div></div><div class="row second"><div class="cell limitHide"><div class="drop"><span></span></div></div><div class="cell"><div class="rendered"></div></div></div></div></div>'),t=n._many?"field.uploadMany.":"field.upload.";return n._input=a,n._enabled=!0,n.id&&a.find("input[type=file]").attr("id",P.safeId(n.id)),n.attr&&a.find("input[type=file]").attr(n.attr),$e.call(i,n),c.FileReader&&!1!==n.dragDrop?(a.find("div.drop span").text(i.i18n(n.dragDropText,t+"dragDrop")),(s=a.find("div.drop")).on("drop",function(t){return n._enabled&&(i.field(n.name).processing(!0),P.upload(i,n,t.originalEvent.dataTransfer.files,$e,function(t,e){e||o.call(i,t),i.field(n.name).processing(!1)}),s.removeClass("over")),!1}).on("dragleave dragexit",function(t){return n._enabled&&s.removeClass("over"),!1}).on("dragover",function(t){return n._enabled&&s.addClass("over"),!1}),i.on("open",function(){w("body").on("dragover.DTE_Upload drop.DTE_Upload",function(t){return!1})}).on("close",function(){w("body").off("dragover.DTE_Upload drop.DTE_Upload")})):(a.addClass("noDrop"),a.append(a.find("div.rendered"))),a.find("div.clearValue button").on("click",function(t){t.preventDefault(),n._enabled&&e.set.call(i,n,"")}),a.find("input[type=file]").on("input",function(){i.field(n.name).processing(!0),P.upload(i,n,this.files,$e,function(t,e){e||o.call(i,t),i.field(n.name).processing(!1),a.find("input[type=file]")[0].value=""})}),a}function D(t){setTimeout(function(){t.trigger("change",{editor:!0,editorSet:!0})},0)}var e=w.extend(!0,{},Xe,{canReturnSubmit:function(t,e){return!0},disable:function(t){t._input.prop("disabled",!0)},enable:function(t){t._input.prop("disabled",!1)},get:function(t){return t._input.val()},set:function(t,e){t._input.val(e),D(t._input)}}),Ze=w.extend(!0,{},e,{create:function(n){function t(){n._dropdown.filter(n._input.val()).show()}var o=this,e=(n._input=w("<input/>").attr(w.extend({id:P.safeId(n.id),type:"text",autocomplete:"off"},n.attr||{})),void 0===n.escapeLabelHtml&&(n.escapeLabelHtml=!0),!0===n.ajax?"string"==typeof this.s.ajax?this.s.ajax:this.s.ajax.url:n.ajax),i=n.i18n||{};n._dropdown=new Ge(n._input,{ajax:e,ajaxData:w.extend({},n.ajaxData,((e={})[this.s.actionName]="search",e.field=n.name,e)),escapeHtml:n.escapeLabelHtml,i18n:{noResults:this.i18n(i.noResults,"field.autocomplete.noResults"),title:i.title,placeholder:this.i18n(i.placeholder,"field.autocomplete.placeholder")},order:n.optionsOrder,options:n.options||[],renderer:n.display,search:!1,select:function(t){n._selected=!0,setTimeout(function(){return n._selected=!1},200),n._input.val(t).focus()}}),this.on("open",function(t,e,i){n._dropdown.attachTo("main"!==e||Ze.dropDownBody?"body":o.s.displayController.node())});return n._input.on("blur",function(){n._dropdown.blur(this)}).on("keydown",function(t){if(40===t.keyCode)return n._dropdown.focus(),!1}).on("focus",t).on("input",n.ajax?r.util.debounce(t):t),this.on("close",function(){return n._dropdown.hide()}),n._input[0]},update:function(t,e,i){t.ajax||t._dropdown.options(e,i)},destroy:function(t){t._input.off(),t._dropdown.destroy()},canReturnSubmit:function(t){return y.activeElement===t._input[0]&&!t._selected},owns:function(t,e){return t._dropdown.owns(e)}}),o=w.extend(!0,{},e,{_addOptions:function(o,t,e){var s=o._input,r=0;(e=void 0===e?!1:e)?r=w("input",s).length:s.empty(),t&&P.pairs(t,o.optionsPair,function(t,e,i,n){s.append('<div><input id="'+P.safeId(o.id)+"_"+(i+r)+'" type="checkbox" /><label for="'+P.safeId(o.id)+"_"+(i+r)+'">'+e+"</label></div>"),w("input:last",s).attr("value",t)[0]._editor_val=t,n&&w("input:last",s).attr(n)})},create:function(t){return t._input=w("<div></div>"),o._addOptions(t,t.options||t.ipOpts),t._input[0]},disable:function(t){t._input.find("input").prop("disabled",!0)},enable:function(t){t._input.find("input").prop("disabled",!1)},get:function(t){var e=[],i=t._input.find("input:checked");return i.length?i.each(function(){e.push(this._editor_val)}):void 0!==t.unselectedValue&&e.push(t.unselectedValue),void 0===t.separator||null===t.separator?e:e.join(t.separator)},set:function(t,e){var i,n,o=t._input.find("input"),s=(Array.isArray(e)||"string"!=typeof e?Array.isArray(e)||(e=[e]):e=e.split(t.separator||"|"),e.length);o.each(function(){for(n=!1,i=0;i<s;i++)if(this._editor_val==e[i]){n=!0;break}this.checked=n}),D(o)},update:function(t,e,i){var n=o.get(t);o._addOptions(t,e,i),o.set(t,n)}}),Ke=w.fn.dataTable,C=w.extend(!0,{},e,{_addOptions:function(t,e,i){t=t.dt;(i=void 0===i?!1:i)||t.clear(),t.rows.add(e).draw()},_jumpToFirst:function(t,e){function i(){var t=o.row({order:"applied",selected:!0}).node();t&&r.height()-10<(t=w(t).position().top)&&r.scrollTop(t)}var n,o=t.dt,t=o.row({order:"applied",selected:!0}).index(),s=0,r=("number"==typeof t&&(n=o.page.info().length,t=o.rows({order:"applied"}).indexes().indexOf(t),s=0<n?Math.floor(t/n):0),o.page(s).draw(!1),w("div.dataTables_scrollBody",o.table().container()));r.length&&(r.parents("body").length?i():e.one("open",function(){i()}))},create:function(r){var a=this,n=(r.optionsPair=w.extend({label:"label",value:"value"},r.optionsPair),w("<table>")),t=w("<div>").append(n),o=w('<div class="DTE_Field_Type_datatable_info">'),e=Ke.versionCheck("2"),i=(r.footer&&w("<tfoot>").append(Array.isArray(r.footer)?w("<tr>").append(w.map(r.footer,function(t){return w("<th>").html(t)})):r.footer).appendTo(n),r.config&&r.config.buttons&&r.config.buttons.length),l=n.addClass(C.tableClass).width("100%").on("init.dt",function(t,e){var i;e.nTable===n[0]&&(e=new Ke.Api(e),i=w(e.table(void 0).container()),Ke.select.init(e),o.append(i.find("div.dt-search")).append(i.find("div.dataTables_filter")).append(i.find("div.dt-buttons")).append(i.find("div.dt-info")).append(i.find("div.dataTables_info")))}).DataTable(w.extend({buttons:[],columns:[{data:r.optionsPair.label,title:"Label"}],deferRender:!0,dom:e?null:"fiBtp",language:{paginate:{next:">",previous:"<"},search:"",searchPlaceholder:"Search"},layout:e?{top:i?["search","buttons","info"]:["search","info"],bottom:["paging"],bottomStart:null,bottomEnd:null,topStart:null,topEnd:null}:null,lengthChange:!1,select:{style:r.multiple?"os":"single"}},r.config));return this.on("open",function(){l.search()&&l.search("").draw(),l.columns.adjust()}),l.on("user-select",function(){D(w(r.dt.table().container()))}),r.editor&&(r.editor.table(l),r.editor.on("submitComplete",function(t,e,i,n){if("create"===n)for(var o=0,s=e.data;o<s.length;o++)!function(i){l.rows(function(t,e){return e===i}).select()}(s[o]);else"edit"!==n&&"remove"!==n||a._dataSource("refresh");C._jumpToFirst(r,a)})),r.dt=l,C._addOptions(r,r.options||[]),{input:t,side:o}},disable:function(t){t.dt.select.style("api"),t.dt.buttons().container().css("display","none")},dt:function(t){return t.dt},enable:function(t){t.dt.select.style(t.multiple?"os":"single"),t.dt.buttons().container().css("display","block")},get:function(t){var e=t.dt.rows({selected:!0}).data().pluck(t.optionsPair.value).toArray();return t.separator||!t.multiple?e.join(t.separator||","):e},set:function(t,n,e){t.multiple&&t.separator&&!Array.isArray(n)?n="string"==typeof n?n.split(t.separator):[]:Array.isArray(n)||(n=[n]);var o=u(t.optionsPair.value);t.dt.rows({selected:!0}).deselect(),t.dt.rows(function(t,e,i){return-1!==n.indexOf(o(e))}).select(),C._jumpToFirst(t,this),D(w(t.dt.table().container()))},tableClass:"",update:function(t,e,i){C._addOptions(t,e,i);e=t._lastSet;void 0!==e&&C.set(t,e,!0)}}),Ye=w.fn.dataTable,ti=w.extend(!0,{},e,{create:function(t){return t._div=w("<div />"),t._input=w("<input />").attr(w.extend(!0,{id:P.safeId(t.id),type:"text"},t.attr)).appendTo(t._div),Ye.DateTime||P.error("DateTime library is required",15),t.momentLocale&&!t.opts.locale&&(t.opts.locale=t.momentLocale),t.momentStrict&&!t.opts.strict&&(t.opts.strict=t.momentStrict),t._picker=new Ye.DateTime(t._input,w.extend({format:t.displayFormat||t.format,i18n:this.s.i18n.datetime},t.opts)),!(t._closeFn=function(){t._picker.hide()})===t.keyInput&&t._input.on("keydown",function(t){t.preventDefault()}),this.on("close",t._closeFn),t._div[0]},destroy:function(t){this.off("close",t._closeFn),t._input.off("keydown"),t._picker.destroy()},errorMessage:function(t,e){t._picker.errorMsg(e)},get:function(t){return t.wireFormat&&t._input.val()?t._picker.valFormat(t.wireFormat):t._input.val()},maxDate:function(t,e){t._picker.max(e)},minDate:function(t,e){t._picker.min(e)},owns:function(t,e){return t._picker.owns(e)},set:function(t,e){"string"==typeof e&&e&&0!==e.indexOf("--")&&t.wireFormat?t._picker.valFormat(t.wireFormat,e):t._picker.val(e),D(t._input)}}),ei={create:function(t){return t._input=w("<input/>"),t._val=t.value,null},get:function(t){return t._val},set:function(t,e){var i=t._val;t._val=e,t._input.val(e),i!==e&&D(t._input)}},ii=w.extend(!0,{},e,{create:function(t){return t._input=w("<input/>").attr(w.extend({id:P.safeId(t.id),type:"password"},t.attr||{})),t._input[0]}}),ni=w.extend(!0,{},e,{create:function(t){return t._input=w("<input/>").attr(w.extend({id:P.safeId(t.id),readonly:"readonly",type:"text"},t.attr||{})),t._input[0]}}),n=w.extend(!0,{},e,{_addOptions:function(t,e,i){var n,o=t._input[0].options,s=0;(i=void 0===i?!1:i)?s=o.length:void(o.length=0)!==t.placeholder&&(i=void 0!==t.placeholderValue?t.placeholderValue:"",s+=1,o[0]=new Option(t.placeholder,i),n=void 0===t.placeholderDisabled||t.placeholderDisabled,o[0].hidden=n,o[0].disabled=n,o[0]._editor_val=i),e&&P.pairs(e,t.optionsPair,function(t,e,i,n){e=new Option(e,t);e._editor_val=t,n&&w(e).attr(n),o[i+s]=e})},create:function(i){return i._input=w("<select></select>").attr(w.extend({id:P.safeId(i.id),multiple:!0===i.multiple},i.attr||{})).on("change.dte",function(t,e){e&&e.editor||(i._lastSet=n.get(i))}),n._addOptions(i,i.options||i.ipOpts),i._input[0]},destroy:function(t){t._input.off("change.dte")},get:function(t){var e=t._input.find("option:selected").map(function(){return this._editor_val}).toArray();return t.multiple?t.separator?e.join(t.separator):e:e.length?e[0]:null},set:function(t,e,i){i||(t._lastSet=e),t.multiple&&t.separator&&!Array.isArray(e)?e="string"==typeof e?e.split(t.separator):[]:Array.isArray(e)||(e=[e]);var n,o,s=e.length,r=!1,i=t._input.find("option");return t._input.find("option").each(function(){for(o=!1,n=0;n<s;n++)if(this._editor_val==e[n]){r=o=!0;break}this.selected=o}),t.placeholder&&!r&&!t.multiple&&i.length&&(i[0].selected=!0),D(t._input),r},update:function(t,e,i){n._addOptions(t,e,i);e=t._lastSet;void 0!==e&&n.set(t,e,!0)}}),k=w.extend(!0,{},e,{_addOptions:function(o,t,e){var s=o._input,r=0;(e=void 0===e?!1:e)?r=w("input",s).length:s.empty(),t&&P.pairs(t,o.optionsPair,function(t,e,i,n){s.append('<div><input id="'+P.safeId(o.id)+"_"+(i+r)+'" type="radio" name="'+o.name+'" /><label for="'+P.safeId(o.id)+"_"+(i+r)+'">'+e+"</label></div>"),w("input:last",s).attr("value",t)[0]._editor_val=t,n&&w("input:last",s).attr(n)})},create:function(t){return t._input=w("<div />"),k._addOptions(t,t.options||t.ipOpts),this.on("open",function(){t._input.find("input").each(function(){this._preChecked&&(this.checked=!0)})}),t._input[0]},disable:function(t){t._input.find("input").prop("disabled",!0)},enable:function(t){t._input.find("input").prop("disabled",!1)},get:function(t){var e=t._input.find("input:checked");return e.length?e[0]._editor_val:void 0!==t.unselectedValue?t.unselectedValue:void 0},set:function(t,e){t._input.find("input").each(function(){this._preChecked=!1,this._editor_val==e?(this.checked=!0,this._preChecked=!0):(this.checked=!1,this._preChecked=!1)}),D(t._input.find("input:checked"))},update:function(t,e,i){var n=k.get(t),e=(k._addOptions(t,e,i),t._input.find("input"));k.set(t,e.filter('[value="'+n+'"]').length?n:e.eq(0).attr("value"))}}),F={canReturnSubmit:function(t){return!1},create:function(n){var o=this,t=(void 0===n.multiple&&(n.multiple=!0),!1===n.multiple&&(n.limit=1),void 0===n.unique&&(n.unique=!0),void 0===n.escapeLabelHtml&&(n.escapeLabelHtml=!0),n.i18n||{}),e=(n._display=w("<div/>"),n._labels=w("<div/>").addClass("dte-tags").attr("id",P.safeId(n.id)).appendTo(n._display),n._add=w("<button>").addClass("dte-tag-add").html(this.i18n(t.addButton,"field.tags.addButton")).appendTo(n._display),n._removeIcon=this.i18n(null==(e=n.i18n)?void 0:e.removeIcon,"field.tags.removeIcon"),!0===n.ajax?"string"==typeof this.s.ajax?this.s.ajax:this.s.ajax.url:n.ajax);return n._enabled=!0,n._dropdown=new Ge(n._display,{ajax:e,ajaxData:w.extend({},n.ajaxData,((e={})[this.s.actionName]="search",e.field=n.name,e)),escapeHtml:n.escapeLabelHtml,order:n.optionsOrder,options:n.options||[],renderer:n.display,search:!0,select:function(e){var t,i=F.get(n,!0).slice();null===n._changeVal?-1!==(t=i.indexOf(e))&&!1!==n.unique||(i.push(e),F.set(n,i),oi(n._display,i.length-1)):-1!==(t=i.indexOf(n._changeVal))&&(!1===n.unique?(i.splice(t,1,e),F.set(n,i),oi(n._display,t)):(i.splice(t,1),0===i.filter(function(t){return t===e}).length&&(i.splice(t,0,e),F.set(n,i),oi(n._display,t))))},i18n:{inputPlaceholder:this.i18n(t.inputPlaceholder,"field.tags.inputPlaceholder"),noResults:this.i18n(t.noResults,"field.tags.noResults"),title:t.title,placeholder:this.i18n(t.placeholder,"field.tags.placeholder")}}),this.on("open",function(t,e,i){n._dropdown.attachTo("main"!==e||F.dropDownBody?"body":o.s.displayController.node())}),n._labels.on("click","div.dte-tag-clear",function(){var t,e;n._enabled&&(e=w(this.parentNode).data("value"),-1!==(e=(t=F.get(n,!0).slice()).indexOf(e))&&t.splice(e,1),F.set(n,t),setTimeout(function(){return n._add.focus()},50))}),n._labels.on("click","div.dte-tag-label",function(){var t;n._enabled&&(t=w(this.parentNode).data("value"),n._dropdown.show(this),n._changeVal=t)}),n._add.on("click",function(){n._enabled&&(n._changeVal=null,n._dropdown.filter("").show(this))}),n._display.on("keydown",function(t){13===t.keyCode&&w(t.target).trigger("click")}),this.on("close",function(){return n._dropdown.hide()}),n._display},destroy:function(t){t._display.empty().off(),t._dropdown.destroy()},disable:function(t){t._enabled=!1,t._display.addClass("dte-tags-disabled")},enable:function(t){t._enabled=!0,t._display.removeClass("dte-tags-disabled")},get:function(t,e){var i=t._val;return(e=void 0!==e&&e)?i:!1===t.multiple?i.length?i[0]:null:t.separator?i.join(t.separator):i},input:function(t){return t._labels},set:function(t,e){""!==e&&null!==e||(e=[]),t.multiple&&!Array.isArray(e)&&t.separator&&(e="string"==typeof e?e.split(t.separator):[]),Array.isArray(e)||(e=[e]),t._val=e,t._add.css("display",!t.limit||e.length<t.limit?"inline-block":"none"),t._labels.empty();for(var i=[],n=0;n<e.length;n++){var o=t._dropdown.label(e[n]),s=void 0,r=w("<div>");null===o&&null!==e[n]?(s='<div class="dte-tag-loading"></div>',i.push({value:e[n],el:r})):s=o,w("<div>").addClass("dte-tag").data("value",e[n]).append(r.addClass("dte-tag-label").attr("tabindex",0).html(s)).append(w("<div>").addClass("dte-tag-clear").attr("tabindex",0).html(t._removeIcon)).appendTo(t._labels)}i.length&&t._dropdown.asyncLabels(i,function(t,e){t.el.html(e)}),D(t._labels)},update:function(t,e,i){t.ajax||t._dropdown.options(e,i)},owns:function(t,e){return t._dropdown.owns(e)}};function oi(t,e){t.find("div.dte-tag-label").eq(e).focus()}var i=w.extend(!0,{},e,{create:function(t){return t._input=w("<input/>").attr(w.extend({id:P.safeId(t.id),type:"text"},t.attr||{})),t._input[0]}}),j=w.extend(!0,{},e,{canReturnSubmit:function(t,e){return!1},create:function(t){return t._input=w("<textarea></textarea>").attr(w.extend({id:P.safeId(t.id)},t.attr||{})),t._input[0]}}),si=w.extend(!0,{},e,{canReturnSubmit:function(t,e){return!1},create:function(e){e._many=!1;var i=this;return Qe(si,i,e,function(t){si.set.call(i,e,t[0]),i._event("postUpload",[e.name,t[0]])})},disable:function(t){t._input.find("input").prop("disabled",!0),t._enabled=!1},enable:function(t){t._input.find("input").prop("disabled",!1),t._enabled=!0},get:function(t){return t._val},set:function(t,e){t._val=e,t._input.val("");var i=t._input,n=(t.display&&(n=i.find("div.rendered"),t._val?n.html(t.display(t._val)):n.empty().append("<span>"+this.i18n(t.noFileText,"field.upload.noFile")+"</span>")),i.find("div.clearValue button")),o=this.i18n(t.clearText,"field.upload.clear");e&&o?(n.html(o),i.removeClass("noClear")):i.addClass("noClear"),t._input.find("input").triggerHandler("upload.editor",[t._val])}}),O=w.extend(!0,{},e,{_showHide:function(t){t.limit&&(t._container.find("div.limitHide").css("display",t._val.length>=t.limit?"none":"block"),t._limitLeft=t.limit-t._val.length)},canReturnSubmit:function(t,e){return!1},create:function(e){e._many=!0;var i=this,t=Qe(O,i,e,function(t){e._val=e._val.concat(t),O.set.call(i,e,e._val),i._event("postUpload",[e.name,e._val])},!0);return t.addClass("multi").on("click","button.remove",function(t){t.stopPropagation(),e._enabled&&(t=w(this).data("idx"),e._val.splice(t,1),O.set.call(i,e,e._val))}),e._container=t},disable:function(t){t._input.find("input").prop("disabled",!0),t._enabled=!1},enable:function(t){t._input.find("input").prop("disabled",!1),t._enabled=!0},get:function(t){return t._val},set:function(i,t){if(t=t||[],!Array.isArray(t))throw new Error("Upload collections must have an array as a value");i._val=t,i._input.val("");var n,o=this,e=i._input;i.display&&(e=e.find("div.rendered").empty(),t.length?(n=w("<ul></ul>").appendTo(e),w.each(t,function(t,e){e=i.display(e,t);null!==e&&n.append("<li>"+e+' <button class="'+o.classes.form.button+' remove" data-idx="'+t+'">&times;</button></li>')})):e.append("<span>"+this.i18n(i.noFileText,"field.uploadMany.noFiles")+"</span>")),O._showHide(i),i._input.find("input").triggerHandler("upload.editor",[i._val])}}),e={autocomplete:Ze,checkbox:o,datatable:C,datetime:ti,hidden:ei,password:ii,radio:k,tags:F,readonly:ni,select:n,text:i,textarea:j,upload:si,uploadMany:O},ti={className:"",compare:null,data:"",def:"",entityDecode:!0,fieldInfo:"",getFormatter:null,id:"",label:"",labelInfo:"",message:"",multiEditable:!0,name:null,nullDefault:!1,setFormatter:null,submit:!0,type:"text"},ri=w.fn.dataTable,ei=(A.prototype.def=function(t){var e,i=this.s.opts;return void 0===t?"function"==typeof(e=void 0!==i.default?i.default:i.def)?e():e:(i.def=t,this)},A.prototype.disable=function(){return this.dom.container.addClass(this.s.classes.disabled),this._typeFn("disable"),this},A.prototype.displayed=function(){var t=this.dom.container;return!(!t.parents("body").length||"none"===t.css("display"))},A.prototype.enable=function(t){return!1===(t=void 0===t?!0:t)?this.disable():(this.dom.container.removeClass(this.s.classes.disabled),this._typeFn("enable"),this)},A.prototype.enabled=function(){return!1===this.dom.container.hasClass(this.s.classes.disabled)},A.prototype.error=function(t,e){var i=this.s.classes;return t?(this.dom.container.addClass(i.error),this.input().addClass(i.inputError)):(this.dom.container.removeClass(i.error),this.input().removeClass(i.inputError)),this._typeFn("errorMessage",t),this._msg(this.dom.fieldError,t,e)},A.prototype.fieldInfo=function(t){return this._msg(this.dom.fieldInfo,t)},A.prototype.isMultiValue=function(){return this.s.multiValue&&1!==this.s.multiIds.length},A.prototype.inError=function(){return this.dom.container.hasClass(this.s.classes.error)},A.prototype.input=function(){return this.s.type.input?this._typeFn("input"):w("input, select, textarea",this.dom.container)},A.prototype.focus=function(){return this.s.type.focus?this._typeFn("focus"):this.input().focus(),this},A.prototype.get=function(){if(!this.isMultiValue())return this._format(this._typeFn("get"),this.s.opts.getFormatter)},A.prototype.hide=function(t){var e=this,i=this.dom.container,n=parseFloat(w(this.s.host.displayNode()).css("opacity"));return void 0===t&&(t=!0),this.s.host.display()&&.5<n&&t&&w.fn.slideUp?(this.s.hiding=!0,i.slideUp(function(){return e.s.hiding=!1})):i.css("display","none"),this},A.prototype.label=function(t){var e=this.dom.label,i=this.dom.labelInfo.detach();return void 0===t?e.html():(e.html(t),e.append(i),this)},A.prototype.labelInfo=function(t){return this._msg(this.dom.labelInfo,t)},A.prototype.message=function(t,e){return this._msg(this.dom.fieldMessage,t,e)},A.prototype.multiGet=function(t){var e=this.s.multiValues,i=this.s.multiIds,n=this.isMultiValue();if(void 0===t)for(var o=this.val(),s={},r=0,a=i;r<a.length;r++){var l=a[r];s[l]=n?this._format(e[l],this.s.opts.getFormatter):o}else s=n?this._format(e[t],this.s.opts.getFormatter):this.val();return s},A.prototype.multiRestore=function(){this.s.multiValue=!0,this._multiValueCheck()},A.prototype.multiSet=function(t,i,e){void 0===e&&(e=!0);function n(t,e){-1===w.inArray(t,r)&&r.push(t),s[t]=o._format(e,o.s.opts.setFormatter)}var o=this,s=this.s.multiValues,r=this.s.multiIds;void 0===i&&(i=t,t=void 0);return w.isPlainObject(i)&&void 0===t?w.each(i,function(t,e){n(t,e)}):void 0===t?w.each(r,function(t,e){n(e,i)}):n(t,i),this.s.multiValue=!0,e&&this._multiValueCheck(),this},A.prototype.name=function(){return this.s.opts.name},A.prototype.node=function(){return this.dom.container[0]},A.prototype.nullDefault=function(){return this.s.opts.nullDefault},A.prototype.processing=function(t){return void 0===t?this.s.processing:(this.dom.processing.css("display",t?"block":"none"),this.s.processing=t,this.s.host.internalEvent("processing-field",[t]),this)},A.prototype.set=function(t,e){void 0===e&&(e=!0);function i(t){return"string"!=typeof t?t:t.replace(/&gt;/g,">").replace(/&lt;/g,"<").replace(/&amp;/g,"&").replace(/&quot;/g,'"').replace(/&#163;/g,"£").replace(/&#0?39;/g,"'").replace(/&#0?10;/g,"\n")}this.s.multiValue=!1;var n=this.s.opts.entityDecode;if(void 0===n||!0===n)if(Array.isArray(t))for(var o=0,s=t.length;o<s;o++)t[o]=i(t[o]);else t=i(t);return!0===e?(t=this._format(t,this.s.opts.setFormatter),this._typeFn("set",t),this._multiValueCheck()):this._typeFn("set",t),this},A.prototype.show=function(t,e){var i;return void 0===t&&(t=!0),!1===(e=void 0===e?!0:e)?this.hide(t):(e=this.dom.container,i=parseFloat(w(this.s.host.displayNode()).css("opacity")),this.s.host.display()&&.5<i&&t&&w.fn.slideDown?e.slideDown():e.css("display",""),this)},A.prototype.submittable=function(t){return null==(t=void 0===t?null:t)?this.s.opts.submit:(this.s.opts.submit=t,this)},A.prototype.type=function(){return this.s.opts.type},A.prototype.update=function(t,e){return void 0===e&&(e=!1),this.s.type.update&&this._typeFn("update",t,e),this},A.prototype.val=function(t){return void 0===t?this.get():this.set(t)},A.prototype.compare=function(t,e){return(this.s.opts.compare||H)(t,e)},A.prototype.dataSrc=function(){return this.s.opts.data},A.prototype.destroy=function(){return this.dom.container.remove(),this._typeFn("destroy"),this},A.prototype.multiEditable=function(){return this.s.opts.multiEditable},A.prototype.multiIds=function(){return this.s.multiIds},A.prototype.multiInfoShown=function(t){this.dom.multiInfo.css({display:t?"block":"none"})},A.prototype.multiReset=function(){this.s.multiIds=[],this.s.multiValues={}},A.prototype._msg=function(t,e,i){var n;return void 0===e?t.html():("function"==typeof e&&(e=e(n=this.s.host,new ri.Api(n.internalSettings().table))),t.parent().is(":visible")&&w.fn.animate?(t.html(e),e?t.slideDown(i):t.slideUp(i)):(t.html(e||"").css("display",e?"block":"none"),i&&i()),this)},A.prototype._multiValueCheck=function(){var t,e,i=this.s.multiIds,n=this.s.multiValues,o=this.s.multiValue,s=this.s.opts.multiEditable,r=!1;if(i)for(var a=0;a<i.length;a++){if(e=n[i[a]],0<a&&!H(e,t)){r=!0;break}t=e}r&&o||!s&&this.isMultiValue()?(this.dom.inputControl.css({display:"none"}),this.dom.multi.css({display:"block"}),w(this.node()).trigger("change")):(this.dom.inputControl.css({display:"block"}),this.dom.multi.css({display:"none"}),o&&!r&&this.set(t,!1)),this.dom.multiReturn.css({display:i&&1<i.length&&r&&!o?"block":"none"});o=this.s.host.internalI18n().multi;return this.dom.multiTitle.html(o.title),this.dom.multiInfo.html(s?o.info:o.noMulti),this.dom.multi.toggleClass(this.s.classes.multiNoEdit,!s),this.s.host.internalMultiInfo(),!0},A.prototype._typeFn=function(t){for(var e=[],i=1;i<arguments.length;i++)e[i-1]=arguments[i];e.unshift(this.s.opts);t=this.s.type[t];if(t)return t.apply(this.s.host,e)},A.prototype._errorNode=function(){return this.dom.fieldError},A.prototype._format=function(t,e){var i,n;return e?(Array.isArray(e)&&(n=(i=e.slice()).shift(),e=A.formatters[n].apply(this,i)),e.call(this.s.host,t,this)):t},A.defaults=ti,A.formatters={},A);function A(t,e,i){var n=this,o=this,s=i.internalI18n().multi,r=w.extend(!0,{},A.defaults,t);if(!P.fieldTypes[r.type])throw new Error("Error adding field - unknown field type "+r.type);this.s={classes:e,hiding:!1,host:i,multiIds:[],multiValue:!1,multiValues:{},name:r.name,opts:r,processing:!1,type:P.fieldTypes[r.type]},r.id||(r.id=("DTE_Field_"+r.name).replace(/ /g,"_")),""===r.data&&(r.data=r.name),this.valFromData=function(t){return u(r.data)(t,"editor")},this.valToData=_(r.data);var a=w('<div class="'+e.wrapper+" "+e.typePrefix+r.type+" "+e.namePrefix+r.name+" "+r.className+'"><label data-dte-e="label" class="'+e.label+'" for="'+P.safeId(r.id)+'">'+r.label+'<div data-dte-e="msg-label" class="'+e["msg-label"]+'">'+r.labelInfo+'</div></label><div data-dte-e="input" class="'+e.input+'"><div data-dte-e="input-control" class="'+e.inputControl+'"></div><div data-dte-e="multi-value" class="'+e.multiValue+'"><span data-dte-e="multi-title">'+s.title+'</span><span data-dte-e="multi-info" class="'+e.multiInfo+'">'+s.info+'</span></div><div data-dte-e="msg-multi" class="'+e.multiRestore+'">'+s.restore+'</div><div data-dte-e="msg-error" class="'+e["msg-error"]+'"></div><div data-dte-e="msg-message" class="'+e["msg-message"]+'">'+r.message+'</div><div data-dte-e="msg-info" class="'+e["msg-info"]+'">'+r.fieldInfo+'</div></div><div data-dte-e="field-processing" class="'+e.processing+'"><span></span></div></div>'),t=this._typeFn("create",r),s=null;t&&t.side&&(s=t.side,t=t.input),null!==t?l("input-control",a).prepend(t):(a.css("display","none"),a.find("label").removeAttr("for")),this.dom={container:a,fieldError:l("msg-error",a),fieldInfo:l("msg-info",a),fieldMessage:l("msg-message",a),inputControl:l("input-control",a),label:l("label",a).append(s),labelInfo:l("msg-label",a),multi:l("multi-value",a),multiInfo:l("multi-info",a),multiTitle:l("multi-title",a),multiReturn:l("msg-multi",a),processing:l("field-processing",a)},this.dom.multi.on("click",function(){o.s.opts.multiEditable&&!a.hasClass(e.disabled)&&"readonly"!==r.type&&(o.val(""),o.focus())}),this.dom.multiReturn.on("click",function(){o.multiRestore()}),this.input().on("focus",function(){var t,e;n.s.hiding&&(t=(e=i.fields()).indexOf(n.s.name),e=e[t+1])&&i.field(e).focus()}),w.each(this.s.type,function(e,t){"function"==typeof t&&void 0===o[e]&&(o[e]=function(){var t=Array.prototype.slice.call(arguments),t=(t.unshift(e),o._typeFn.apply(o,t));return void 0===t?o:t})})}ii={action:null,className:null,tabIndex:0,text:null},ni={close:function(){},init:function(){},node:function(){},open:function(){}},i=w.fn.dataTable.Api.register;function S(t){t=t.context[0];return t.oInit.editor||t._editor}function I(t,e,i,n){return void 0===(e=e||{}).buttons&&(e.buttons="_basic"),void 0===e.title&&(e.title=t.i18n(null,i+".title")),void 0===e.message&&("remove"===i?(t=t.i18n(null,i+".confirm"),e.message=1!==n?t._.replace(/%d/,n):t[1]):e.message=""),e}i("editor()",function(){return S(this)}),i("row.create()",function(t){var e=S(this);return e.create(I(e,t,"create")),this}),i("row().edit()",function(t){var e=S(this);return e.edit(this[0][0],I(e,t,"edit")),this}),i("rows().edit()",function(t){var e=S(this);return e.edit(this[0],I(e,t,"edit")),this}),i("row().delete()",function(t){var e=S(this);return e.remove(this[0][0],I(e,t,"remove",1)),this}),i("rows().delete()",function(t){var e=S(this);return e.remove(this[0],I(e,t,"remove",this[0].length)),this}),i("cell().edit()",function(t,e){return t?w.isPlainObject(t)&&(e=t,t="inline"):t="inline",S(this)[t](this[0][0],e),this}),i("cells().edit()",function(t){return S(this).bubble(this[0],t),this}),i("file()",Ft),i("files()",jt),w(y).on("xhr.dt",function(t,e,i){"dt"===t.namespace&&i&&i.files&&w.each(i.files,function(t,e){P.files[t]||(P.files[t]={}),w.extend(P.files[t],e)})});var P,j=w.fn.dataTable.ext.buttons;if(w.extend(j,{create:{action:function(t,e,i,n){var o=this,s=n.editor;this.processing(!0),s.one("preOpen",function(){o.processing(!1)}).create(w.extend({buttons:n.formButtons,message:s.i18n(n.formMessage,"create.message"),nest:!0,title:s.i18n(n.formTitle,"create.title")},n.formOptions))},className:"buttons-create",editor:null,formButtons:{action:function(t){this.submit()},text:function(t){return t.i18n(null,"create.submit")}},formMessage:null,formOptions:{},formTitle:null,text:function(t,e,i){return t.i18n("buttons.create",i.editor.i18n(null,"create.button"))}},createInline:{action:function(t,e,i,n){n.editor.inlineCreate(n.position,n.formOptions)},className:"buttons-create",editor:null,formButtons:{action:function(t){this.submit()},text:function(t){return t.i18n(null,"create.submit")}},formOptions:{},position:"start",text:function(t,e,i){return t.i18n("buttons.create",i.editor.i18n(null,"create.button"))}},edit:{action:function(t,e,i,n){var o=this,s=n.editor,r=e.rows({selected:!0}).indexes(),a=e.columns({selected:!0}).indexes(),e=e.cells({selected:!0}).indexes(),e=a.length||e.length?{cells:e,columns:a,rows:r}:r;this.processing(!0),s.one("preOpen",function(){o.processing(!1)}).edit(e,w.extend({buttons:n.formButtons,message:s.i18n(n.formMessage,"edit.message"),nest:!0,refresh:n.refresh,title:s.i18n(n.formTitle,"edit.title")},n.formOptions))},className:"buttons-edit",editor:null,extend:"selected",formButtons:{action:function(t){this.submit()},text:function(t){return t.i18n(null,"edit.submit")}},formMessage:null,formOptions:{},formTitle:null,text:function(t,e,i){return t.i18n("buttons.edit",i.editor.i18n(null,"edit.button"))},refresh:!1},remove:{action:function(t,e,i,n){var o=this,s=n.editor;this.processing(!0),s.one("preOpen",function(){o.processing(!1)}).remove(e.rows({selected:!0}).indexes(),w.extend({buttons:n.formButtons,message:n.formMessage,nest:!0,refresh:n.refresh,title:s.i18n(n.formTitle,"remove.title")},n.formOptions))},className:"buttons-remove",editor:null,extend:"selected",formButtons:{action:function(t){this.submit()},text:function(t){return t.i18n(null,"remove.submit")}},formMessage:function(t,e){e=e.rows({selected:!0}).indexes(),t=t.i18n(null,"remove");return("string"==typeof t.confirm?t.confirm:t.confirm[e.length]||t.confirm._).replace(/%d/g,e.length)},formOptions:{},formTitle:null,limitTo:["rows"],text:function(t,e,i){return t.i18n("buttons.remove",i.editor.i18n(null,"remove.button"))},refresh:!1}}),j.editSingle=w.extend({},j.edit),j.editSingle.extend="selectedSingle",j.removeSingle=w.extend({},j.remove),j.removeSingle.extend="selectedSingle",r&&r.versionCheck&&r.versionCheck("1.11"))return R.prototype.internalEvent=function(t,e){this._event(t,e)},R.prototype.internalI18n=function(){return this.s.i18n},R.prototype.internalMultiInfo=function(){return this._multiInfo()},R.prototype.internalSettings=function(){return this.s},R.fieldTypes=e,R.files={},R.version="2.5.0",R.classes=X,R.Field=ei,R.DateTime=null,R.error=ne,R.pairs=oe,R.factory=re,R.upload=se,R.defaults=N,R.models={button:ii,displayController:ni,fieldType:Xe,formOptions:t,settings:B},R.dataSources={dataTable:m,html:a},R.display={envelope:g,lightbox:x},R.safeId=function(t){return void 0===(e="")&&(e="#"),"string"==typeof(t=t)?e+t.replace(/\./g,"-"):e+t;var e},P=R,r.Editor=P,w.fn.DataTable.Editor=P,r.DateTime&&(P.DateTime=r.DateTime),r.ext.editorFields&&w.extend(P.fieldTypes,r.ext.editorFields),r.ext.editorFields=P.fieldTypes,r.Editor;throw new Error("Editor requires DataTables 1.11 or newer");function R(t){var o=this,n=(this.add=st,this.ajax=rt,this.background=at,this.blur=lt,this.bubble=dt,this.bubbleLocation=ut,this.bubblePosition=ct,this.buttons=pt,this.clear=ht,this.close=ft,this.create=mt,this.undependent=vt,this.dependent=bt,this.destroy=_t,this.disable=yt,this.display=gt,this.displayed=wt,this.displayNode=Tt,this.edit=xt,this.enable=Et,this.error=Dt,this.field=Ct,this.fields=kt,this.file=Ft,this.files=jt,this.get=Ot,this.hide=At,this.i18n=St,this.ids=It,this.inError=Pt,this.inline=Rt,this.inlineCreate=Nt,this.message=Bt,this.mode=Lt,this.modifier=Ht,this.multiGet=Mt,this.multiSet=Vt,this.node=Ut,this.off=qt,this.on=Wt,this.one=zt,this.open=Jt,this.order=Gt,this.refresh=Xt,this.remove=$t,this.set=Qt,this.show=Zt,this.submit=Kt,this.table=Yt,this.template=te,this.title=ee,this.val=ie,this._actionClass=de,this._ajax=ue,this._animate=ce,this._assembleMain=pe,this._blur=he,this._clearDynamicInfo=fe,this._close=me,this._closeReg=ve,this._crudArgs=be,this._dataSource=_e,this._displayReorder=ye,this._drawTitle=ge,this._edit=we,this._editRefresh=Te,this._event=xe,this._eventName=Ee,this._fieldFromNode=De,this._fieldNames=Ce,this._focus=ke,this._formOptions=Fe,this._inline=je,this._inputTrigger=Oe,this._optionsUpdate=Ae,this._message=Se,this._multiInfo=Ie,this._nestedClose=Pe,this._nestedOpen=Re,this._postopen=Ne,this._preopen=Be,this._processing=Le,this._noProcessing=He,this._remove=Me,this._submit=Ve,this._submitTable=Ue,this._submitSuccess=qe,this._submitError=We,this._tidy=ze,this._weakInArray=Je,this instanceof R||alert("DataTables Editor must be initialised as a 'new' instance"),t=w.extend(!0,{},R.defaults,t),this.c=t,this.s=w.extend(!0,{},R.models.settings,{actionName:t.actionName,ajax:t.ajax,formOptions:t.formOptions,i18n:t.i18n,idSrc:t.idSrc,table:t.domTable||t.table,template:t.template?w(t.template).detach():null}),this.classes=w.extend(!0,{},R.classes),R.models.settings.unique++,this),e=this.classes,i=w('<div class="'+e.wrapper+'"><div data-dte-e="processing" class="'+e.processing.indicator+'"><span></span></div><div data-dte-e="body" class="'+e.body.wrapper+'"><div data-dte-e="body_content" class="'+e.body.content+'"></div></div><div data-dte-e="foot" class="'+e.footer.wrapper+'"><div class="'+e.footer.content+'"></div></div></div>'),s=w('<form data-dte-e="form" class="'+e.form.tag+'"><div data-dte-e="form_content" class="'+e.form.content+'"></div></form>');if(this.dom={body:l("body",i)[0],bodyContent:l("body_content",i)[0],buttons:w('<div data-dte-e="form_buttons" class="'+e.form.buttons+'"></div>')[0],footer:l("foot",i)[0],form:s[0],formContent:l("form_content",s)[0],formError:w('<div data-dte-e="form_error" class="'+e.form.error+'"></div>')[0],formInfo:w('<div data-dte-e="form_info" class="'+e.form.info+'"></div>')[0],header:w('<div data-dte-e="head" class="'+e.header.wrapper+'"><div class="'+e.header.content+'"></div></div>')[0],processing:l("processing",i)[0],wrapper:i[0]},w.each(t.events,function(t,i){n.on(t,function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];i.apply(n,t)})}),t.fields&&this.add(t.fields),w(y).on("init.dt.dte"+this.s.unique,function(t,e,i){var n=o.s.table;n&&(n=new r.Api(n),e.nTable===n.table().node())&&(e._editor=o)}).on("i18n.dt.dte"+this.s.unique,function(t,e){var i=o.s.table;i&&(i=new r.Api(i),e.nTable===i.table().node())&&e.oLanguage.editor&&w.extend(!0,o.s.i18n,e.oLanguage.editor)}).on("xhr.dt.dte"+this.s.unique,function(t,e,i){var n=o.s.table;n&&(n=new r.Api(n),e.nTable===n.table().node())&&o._optionsUpdate(i)}),!R.display[t.display])throw new Error("Cannot find display controller "+t.display);this.s.displayController=R.display[t.display].init(this),this._event("initComplete",[]),w(y).trigger("initEditor",[this])}});